<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WPILibC++: wpinet/WebSocket.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="wpilib-128.png"/></td>
  <td id="projectalign">
   <div id="projectname">WPILibC++<span id="projectnumber">&#160;2025.1.1-beta-1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_web_socket_8h_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">WebSocket.h</div></div>
</div><!--header-->
<div class="contents">
<a href="_web_socket_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright (c) FIRST and other WPILib contributors.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Open Source Software; you can modify and/or share it under the terms of</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// the WPILib BSD license file in the root directory of this project.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#ifndef WPINET_WEBSOCKET_H_</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#define WPINET_WEBSOCKET_H_</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;initializer_list&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;span&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;string_view&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;<a class="code" href="wpiutil_2src_2main_2native_2thirdparty_2sigslot_2include_2wpi_2_signal_8h.html">wpi/Signal.h</a>&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;<a class="code" href="_small_vector_8h.html">wpi/SmallVector.h</a>&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="_buffer_8h.html">wpinet/uv/Buffer.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="_error_8h.html">wpinet/uv/Error.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="wpinet_2src_2main_2native_2include_2wpinet_2uv_2_timer_8h.html">wpinet/uv/Timer.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacewpi.html">wpi</a> {</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="keyword">namespace </span>uv {</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">class </span>Stream;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>}  <span class="comment">// namespace uv</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment"></span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment">/**</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment"> * RFC 6455 compliant WebSocket client and server implementation.</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00034" data-start="{" data-end="};">
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html">   34</a></span><span class="keyword">class </span><a class="code hl_class" href="classwpi_1_1_web_socket.html">WebSocket</a> : <span class="keyword">public</span> std::enable_shared_from_this&lt;WebSocket&gt; {</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>  <span class="keyword">struct </span>private_init {};</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a3e860e642aba8af48ff635a67d609f44">   38</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a3e860e642aba8af48ff635a67d609f44">kOpCont</a> = 0x00;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a589c9f706dc2acb0d98d991bef0867ee">   39</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a589c9f706dc2acb0d98d991bef0867ee">kOpText</a> = 0x01;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a91408b482c42017193f6d8917c9da571">   40</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a91408b482c42017193f6d8917c9da571">kOpBinary</a> = 0x02;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a6f6690c53c643f3064125a5ecae4757d">   41</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a6f6690c53c643f3064125a5ecae4757d">kOpClose</a> = 0x08;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a1d277bb3e890b7705bed635f713c3d8c">   42</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a1d277bb3e890b7705bed635f713c3d8c">kOpPing</a> = 0x09;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ac73d6cba986fa122d959afe1bfdfa0ba">   43</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#ac73d6cba986fa122d959afe1bfdfa0ba">kOpPong</a> = 0x0A;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ac1e2e36e425d1ed64d536753adb81b01">   44</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#ac1e2e36e425d1ed64d536753adb81b01">kOpMask</a> = 0x0F;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">   45</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> = 0x80;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a33887888691341aeb8acba94dc680dcc">   46</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a33887888691341aeb8acba94dc680dcc">kFlagControl</a> = 0x08;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ab386ef356db98b06265b13eb3bba05fd">   48</a></span>  <a class="code hl_function" href="classwpi_1_1_web_socket.html#ab386ef356db98b06265b13eb3bba05fd">WebSocket</a>(<a class="code hl_class" href="classwpi_1_1uv_1_1_stream.html">uv::Stream</a>&amp; stream, <span class="keywordtype">bool</span> server, <span class="keyword">const</span> private_init&amp;);</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a90d39961a858a8b924e9fa9de269b539">   49</a></span>  <a class="code hl_function" href="classwpi_1_1_web_socket.html#a90d39961a858a8b924e9fa9de269b539">WebSocket</a>(<span class="keyword">const</span> <a class="code hl_class" href="classwpi_1_1_web_socket.html">WebSocket</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#afac10196362eb4251fb4b818c322e60b">   50</a></span>  <a class="code hl_function" href="classwpi_1_1_web_socket.html#afac10196362eb4251fb4b818c322e60b">WebSocket</a>(<a class="code hl_class" href="classwpi_1_1_web_socket.html">WebSocket</a>&amp;&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a42d638cbd0f73f2bb808d4fbdb0d6704">   51</a></span>  <a class="code hl_class" href="classwpi_1_1_web_socket.html">WebSocket</a>&amp; <a class="code hl_function" href="classwpi_1_1_web_socket.html#a42d638cbd0f73f2bb808d4fbdb0d6704">operator=</a>(<span class="keyword">const</span> <a class="code hl_class" href="classwpi_1_1_web_socket.html">WebSocket</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a1e50e1fa4875baf0c09b4f052cb7c666">   52</a></span>  <a class="code hl_class" href="classwpi_1_1_web_socket.html">WebSocket</a>&amp; <a class="code hl_function" href="classwpi_1_1_web_socket.html#a1e50e1fa4875baf0c09b4f052cb7c666">operator=</a>(<a class="code hl_class" href="classwpi_1_1_web_socket.html">WebSocket</a>&amp;&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a8bc1b5b8dc1585b9e98f25195012bc4a">   53</a></span>  <a class="code hl_function" href="classwpi_1_1_web_socket.html#a8bc1b5b8dc1585b9e98f25195012bc4a">~WebSocket</a>();</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment"></span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="comment">   * Connection states.</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00058" data-start="{" data-end="};">
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3">   58</a></span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3">State</a> {<span class="comment"></span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="comment">    /** The connection is not yet open. */</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3ad9ab82201c5366392679d363f6235c25">   60</a></span>    <a class="code hl_enumvalue" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3ad9ab82201c5366392679d363f6235c25">CONNECTING</a> = 0,<span class="comment"></span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="comment">    /** The connection is open and ready to communicate. */</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a7cdf46d1415e2440640848a0ffeef926">   62</a></span>    <a class="code hl_enumvalue" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a7cdf46d1415e2440640848a0ffeef926">OPEN</a>,<span class="comment"></span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment">    /** The connection is in the process of closing. */</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a06c3f1c02bda119cc99bb48434b534b3">   64</a></span>    <a class="code hl_enumvalue" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a06c3f1c02bda119cc99bb48434b534b3">CLOSING</a>,<span class="comment"></span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="comment">    /** The connection failed. */</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a9d850e9667a5ed87f9755a566fdd08e7">   66</a></span>    <a class="code hl_enumvalue" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a9d850e9667a5ed87f9755a566fdd08e7">FAILED</a>,<span class="comment"></span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment">    /** The connection is closed. */</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <a class="code hl_enumvalue" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a23d5c7149dc9a7b0ba15ca3479d77f8a">CLOSED</a></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a23d5c7149dc9a7b0ba15ca3479d77f8a">   69</a></span>  };</div>
</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment"></span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment">   * Client connection options.</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00074" data-start="{" data-end="};">
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_client_options.html">   74</a></span>  <span class="keyword">struct </span><a class="code hl_struct" href="structwpi_1_1_web_socket_1_1_client_options.html">ClientOptions</a> {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_client_options.html#aa64e8dec5304497458a7b37624809d6a">   75</a></span>    <a class="code hl_function" href="structwpi_1_1_web_socket_1_1_client_options.html#aa64e8dec5304497458a7b37624809d6a">ClientOptions</a>() : <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_client_options.html#a8151a3ab73093622ed51639adf1a4a70">handshakeTimeout</a>{(uv::Timer::Time::max)()} {}</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment"></span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment">    /** Timeout for the handshake request. */</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_client_options.html#a8151a3ab73093622ed51639adf1a4a70">   78</a></span>    <a class="code hl_typedef" href="classwpi_1_1uv_1_1_timer.html#ad766cbba1cd9695e8ba2fbff6d8e0485">uv::Timer::Time</a> <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_client_options.html#a8151a3ab73093622ed51639adf1a4a70">handshakeTimeout</a>;  <span class="comment">// NOLINT</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment"></span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="comment">    /** Additional headers to include in handshake. */</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_client_options.html#adfad68a6329a344cda2850e9f694b9f5">   81</a></span>    std::span&lt;const std::pair&lt;std::string_view, std::string_view&gt;&gt; <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_client_options.html#adfad68a6329a344cda2850e9f694b9f5">extraHeaders</a>;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  };</div>
</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="comment"></span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="comment">   * Frame.  Used by SendFrames().</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00087" data-start="{" data-end="};">
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html">   87</a></span>  <span class="keyword">struct </span><a class="code hl_struct" href="structwpi_1_1_web_socket_1_1_frame.html">Frame</a> {</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#aa97f56b3b9043042a4e9fa361096b491">   88</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#aa97f56b3b9043042a4e9fa361096b491">kText</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a589c9f706dc2acb0d98d991bef0867ee">kOpText</a>;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#af7744e7c7e7abd3be5a3ff3168ddb33a">   89</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#af7744e7c7e7abd3be5a3ff3168ddb33a">kBinary</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a91408b482c42017193f6d8917c9da571">kOpBinary</a>;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#af2db548bf155bcb8693c5b02813e3deb">   90</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#af2db548bf155bcb8693c5b02813e3deb">kTextFragment</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a589c9f706dc2acb0d98d991bef0867ee">kOpText</a>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#a96f3b0d51e37df0e436bc70845c738a3">   91</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a96f3b0d51e37df0e436bc70845c738a3">kBinaryFragment</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a91408b482c42017193f6d8917c9da571">kOpBinary</a>;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#a914e7533bd0f9524be0572aa514ae512">   92</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a914e7533bd0f9524be0572aa514ae512">kFragment</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a3e860e642aba8af48ff635a67d609f44">kOpCont</a>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#acd36ec8167a3280b5015474dd5dae43f">   93</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#acd36ec8167a3280b5015474dd5dae43f">kFinalFragment</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a3e860e642aba8af48ff635a67d609f44">kOpCont</a>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#a248d9a26ef6e327c88e90c1b6afd3ee1">   94</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a248d9a26ef6e327c88e90c1b6afd3ee1">kPing</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a1d277bb3e890b7705bed635f713c3d8c">kOpPing</a>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#a39afe94474d2f7f9a80674586c4cae2e">   95</a></span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a39afe94474d2f7f9a80674586c4cae2e">kPong</a> = <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#ac73d6cba986fa122d959afe1bfdfa0ba">kOpPong</a>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="foldopen" id="foldopen00097" data-start="{" data-end="}">
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#a0fe203cd29ceb33efb9e13b88f041213">   97</a></span>    <span class="keyword">constexpr</span> <a class="code hl_function" href="structwpi_1_1_web_socket_1_1_frame.html#a0fe203cd29ceb33efb9e13b88f041213">Frame</a>(uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#ad89f72b281d473a92d48a8262913e5f4">opcode</a>, std::span&lt;const uv::Buffer&gt; <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a9ad6d44206f9cf2ad665c9347481d425">data</a>)</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        : <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#ad89f72b281d473a92d48a8262913e5f4">opcode</a>{<a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#ad89f72b281d473a92d48a8262913e5f4">opcode</a>}, <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a9ad6d44206f9cf2ad665c9347481d425">data</a>{<a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a9ad6d44206f9cf2ad665c9347481d425">data</a>} {}</div>
</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#ad89f72b281d473a92d48a8262913e5f4">  100</a></span>    uint8_t <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#ad89f72b281d473a92d48a8262913e5f4">opcode</a>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="structwpi_1_1_web_socket_1_1_frame.html#a9ad6d44206f9cf2ad665c9347481d425">  101</a></span>    std::span&lt;const uv::Buffer&gt; <a class="code hl_variable" href="structwpi_1_1_web_socket_1_1_frame.html#a9ad6d44206f9cf2ad665c9347481d425">data</a>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  };</div>
</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment"></span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="comment">   * Starts a client connection by performing the initial client handshake.</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="comment">   * An open event is emitted when the handshake completes.</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment">   * This sets the stream user data to the websocket.</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="comment">   * @param stream Connection stream</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="comment">   * @param uri The Request-URI to send</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="comment">   * @param host The host or host:port to send</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="comment">   * @param protocols The list of subprotocols</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="comment">   * @param options Handshake options</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment">   */</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ab82d685aa3034522d9e8696a101020b3">  114</a></span>  <span class="keyword">static</span> std::shared_ptr&lt;WebSocket&gt; <a class="code hl_function" href="classwpi_1_1_web_socket.html#ab82d685aa3034522d9e8696a101020b3">CreateClient</a>(</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>      <a class="code hl_class" href="classwpi_1_1uv_1_1_stream.html">uv::Stream</a>&amp; stream, std::string_view uri, std::string_view host,</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>      std::span&lt;const std::string_view&gt; protocols = {},</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      <span class="keyword">const</span> ClientOptions&amp; options = {});</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment"></span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment">   * Starts a client connection by performing the initial client handshake.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment">   * An open event is emitted when the handshake completes.</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment">   * This sets the stream user data to the websocket.</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">   * @param stream Connection stream</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="comment">   * @param uri The Request-URI to send</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="comment">   * @param host The host or host:port to send</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment">   * @param protocols The list of subprotocols</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="comment">   * @param options Handshake options</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00129" data-start="{" data-end="}">
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a02f298e21ee655cd2a765013751f6063">  129</a></span>  <span class="keyword">static</span> std::shared_ptr&lt;WebSocket&gt; <a class="code hl_function" href="classwpi_1_1_web_socket.html#a02f298e21ee655cd2a765013751f6063">CreateClient</a>(</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>      <a class="code hl_class" href="classwpi_1_1uv_1_1_stream.html">uv::Stream</a>&amp; stream, std::string_view uri, std::string_view host,</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>      std::initializer_list&lt;std::string_view&gt; protocols,</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>      <span class="keyword">const</span> <a class="code hl_struct" href="structwpi_1_1_web_socket_1_1_client_options.html">ClientOptions</a>&amp; options = {}) {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#ab82d685aa3034522d9e8696a101020b3">CreateClient</a>(stream, uri, host, {protocols.begin(), protocols.end()},</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                        options);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  }</div>
</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="comment"></span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span><span class="comment">   * Starts a server connection by performing the initial server side handshake.</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="comment">   * This should be called after the HTTP headers have been received.</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="comment">   * An open event is emitted when the handshake completes.</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="comment">   * This sets the stream user data to the websocket.</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span><span class="comment">   * @param stream Connection stream</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="comment">   * @param key The value of the Sec-WebSocket-Key header field in the client</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span><span class="comment">   *            request</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="comment">   * @param version The value of the Sec-WebSocket-Version header field in the</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span><span class="comment">   *                client request</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span><span class="comment">   * @param protocol The subprotocol to send to the client (in the</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="comment">   *                 Sec-WebSocket-Protocol header field).</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span><span class="comment">   */</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a9d931162b8b151746dc9d75565d52d28">  150</a></span>  <span class="keyword">static</span> std::shared_ptr&lt;WebSocket&gt; <a class="code hl_function" href="classwpi_1_1_web_socket.html#a9d931162b8b151746dc9d75565d52d28">CreateServer</a>(</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>      <a class="code hl_class" href="classwpi_1_1uv_1_1_stream.html">uv::Stream</a>&amp; stream, std::string_view key, std::string_view <a class="code hl_enumvalue" href="namespacewpi.html#a2b741829b477ec608a2534e5e5a22f67a2af72f100c356273d46284f6fd1dfc08">version</a>,</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>      std::string_view protocol = {});</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="comment"></span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="comment">   * Get connection state.</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span><span class="comment">   */</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a5809ec7745f800c6e49205f916eaabbc">  157</a></span>  <a class="code hl_enumeration" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3">State</a> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a5809ec7745f800c6e49205f916eaabbc">GetState</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_state; }</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span><span class="comment"></span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span><span class="comment">   * Return if the connection is open.  Messages can only be sent on open</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="comment">   * connections.</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="comment">   */</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a6e883858a7406edf0942375e7fc35c9d">  163</a></span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a6e883858a7406edf0942375e7fc35c9d">IsOpen</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_state == <a class="code hl_enumvalue" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a7cdf46d1415e2440640848a0ffeef926">OPEN</a>; }</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span><span class="comment"></span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span><span class="comment">   * Get the underlying stream.</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span><span class="comment">   */</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#abb34699e433a0bc7af46dee3f5be2fd3">  168</a></span>  <a class="code hl_class" href="classwpi_1_1uv_1_1_stream.html">uv::Stream</a>&amp; <a class="code hl_function" href="classwpi_1_1_web_socket.html#abb34699e433a0bc7af46dee3f5be2fd3">GetStream</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_stream; }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span><span class="comment"></span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span><span class="comment">   * Get the selected sub-protocol.  Only valid in or after the open() event.</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment">   */</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#aafc1614792abba79f234f6fcaaa9f0d0">  173</a></span>  std::string_view <a class="code hl_function" href="classwpi_1_1_web_socket.html#aafc1614792abba79f234f6fcaaa9f0d0">GetProtocol</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_protocol; }</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="comment"></span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="comment">   * Set the maximum message size.  Default is 128 KB.  If configured to combine</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="comment">   * fragments this maximum applies to the entire message (all combined</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment">   * fragments).</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="comment">   * @param size Maximum message size in bytes</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="comment">   */</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ad8ed71cfabb44f5ccfdd9069d6958444">  181</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#ad8ed71cfabb44f5ccfdd9069d6958444">SetMaxMessageSize</a>(<span class="keywordtype">size_t</span> size) { m_maxMessageSize = size; }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment"></span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="comment">   * Set whether or not fragmented frames should be combined.  Default is to</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="comment">   * combine.  If fragmented frames are combined, the text and binary callbacks</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span><span class="comment">   * will always have the second parameter (fin) set to true.</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span><span class="comment">   * @param combine True if fragmented frames should be combined.</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span><span class="comment">   */</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a9eb36dee2f7319a43cd4a794cf635262">  189</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a9eb36dee2f7319a43cd4a794cf635262">SetCombineFragments</a>(<span class="keywordtype">bool</span> combine) { m_combineFragments = combine; }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span><span class="comment"></span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span><span class="comment">   * Initiate a closing handshake.</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span><span class="comment">   * @param code A numeric status code (defaults to 1005, no status code)</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span><span class="comment">   * @param reason A human-readable string explaining why the connection is</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="comment">   *               closing (optional).</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="comment">   */</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a80946a893e0ff08763281d9743c845f3">  197</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a80946a893e0ff08763281d9743c845f3">Close</a>(uint16_t <a class="code hl_variable" href="_third_party_notices_8txt.html#a84115a3d674a21b7abd56eab103ff848">code</a> = 1005, std::string_view reason = {});</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="comment"></span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="comment">   * Send a text message.</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="comment">   * @param data UTF-8 encoded data to send</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00204" data-start="{" data-end="}">
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ada155c42b0c46d236813a968dcbaee4a">  204</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#ada155c42b0c46d236813a968dcbaee4a">SendText</a>(</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>      std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    Send(<a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a589c9f706dc2acb0d98d991bef0867ee">kOpText</a>, data, std::move(callback));</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  }</div>
</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="comment"></span> </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="comment">   * Send a text message.</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="comment">   * @param data UTF-8 encoded data to send</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00215" data-start="{" data-end="}">
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a1190fdad9cf854b4649781131bdc2d84">  215</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a1190fdad9cf854b4649781131bdc2d84">SendText</a>(</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>      std::initializer_list&lt;uv::Buffer&gt; data,</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#ada155c42b0c46d236813a968dcbaee4a">SendText</a>({data.begin(), data.end()}, std::move(callback));</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  }</div>
</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="comment"></span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="comment">   * Send a binary message.</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="comment">   * @param data Data to send</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00226" data-start="{" data-end="}">
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ac76103c69a78862e1268a9e418ff8e83">  226</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#ac76103c69a78862e1268a9e418ff8e83">SendBinary</a>(</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>      std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    Send(<a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a91408b482c42017193f6d8917c9da571">kOpBinary</a>, data, std::move(callback));</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  }</div>
</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span><span class="comment"></span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment">   * Send a binary message.</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="comment">   * @param data Data to send</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00237" data-start="{" data-end="}">
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ab5a49f53b1ecefaf296801cbf8fd2f87">  237</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#ab5a49f53b1ecefaf296801cbf8fd2f87">SendBinary</a>(</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>      std::initializer_list&lt;uv::Buffer&gt; data,</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#ac76103c69a78862e1268a9e418ff8e83">SendBinary</a>({data.begin(), data.end()}, std::move(callback));</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  }</div>
</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="comment"></span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span><span class="comment">   * Send a text message fragment.  This must be followed by one or more</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span><span class="comment">   * SendFragment() calls, where the last one has fin=True, to complete the</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment">   * message.</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="comment">   * @param data UTF-8 encoded data to send</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00250" data-start="{" data-end="}">
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a08c3551897d89153364c7ba78dc92437">  250</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a08c3551897d89153364c7ba78dc92437">SendTextFragment</a>(</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>      std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    Send(<a class="code hl_variable" href="classwpi_1_1_web_socket.html#a589c9f706dc2acb0d98d991bef0867ee">kOpText</a>, data, std::move(callback));</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>  }</div>
</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment"></span> </div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span><span class="comment">   * Send a text message fragment.  This must be followed by one or more</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span><span class="comment">   * SendFragment() calls, where the last one has fin=True, to complete the</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="comment">   * message.</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="comment">   * @param data UTF-8 encoded data to send</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00263" data-start="{" data-end="}">
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#af2cf00cdc05cff940d621618ab737e1c">  263</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#af2cf00cdc05cff940d621618ab737e1c">SendTextFragment</a>(</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>      std::initializer_list&lt;uv::Buffer&gt; data,</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a08c3551897d89153364c7ba78dc92437">SendTextFragment</a>({data.begin(), data.end()}, std::move(callback));</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  }</div>
</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="comment"></span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span><span class="comment">   * Send a text message fragment.  This must be followed by one or more</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="comment">   * SendFragment() calls, where the last one has fin=True, to complete the</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="comment">   * message.</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="comment">   * @param data Data to send</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00276" data-start="{" data-end="}">
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a7ce14bfd88e74935f110cd48943479fb">  276</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a7ce14bfd88e74935f110cd48943479fb">SendBinaryFragment</a>(</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>      std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    Send(<a class="code hl_variable" href="classwpi_1_1_web_socket.html#a91408b482c42017193f6d8917c9da571">kOpBinary</a>, data, std::move(callback));</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  }</div>
</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment"></span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="comment">   * Send a text message fragment.  This must be followed by one or more</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span><span class="comment">   * SendFragment() calls, where the last one has fin=True, to complete the</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment">   * message.</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment">   * @param data Data to send</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00289" data-start="{" data-end="}">
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ad10736e216020a696b27108c3aef0fd3">  289</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#ad10736e216020a696b27108c3aef0fd3">SendBinaryFragment</a>(</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>      std::initializer_list&lt;uv::Buffer&gt; data,</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a7ce14bfd88e74935f110cd48943479fb">SendBinaryFragment</a>({data.begin(), data.end()}, std::move(callback));</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>  }</div>
</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="comment"></span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span><span class="comment">   * Send a continuation frame.  This is used to send additional parts of a</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="comment">   * message started with SendTextFragment() or SendBinaryFragment().</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="comment">   * @param data Data to send</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span><span class="comment">   * @param fin Set to true if this is the final fragment of the message</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00302" data-start="{" data-end="}">
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a46dc3f34c87556ad786b652b578cf211">  302</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a46dc3f34c87556ad786b652b578cf211">SendFragment</a>(</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>      std::span&lt;const uv::Buffer&gt; data, <span class="keywordtype">bool</span> fin,</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    Send(<a class="code hl_variable" href="classwpi_1_1_web_socket.html#a3e860e642aba8af48ff635a67d609f44">kOpCont</a> | (fin ? <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> : 0), data, std::move(callback));</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>  }</div>
</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="comment"></span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="comment">   * Send a continuation frame.  This is used to send additional parts of a</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="comment">   * message started with SendTextFragment() or SendBinaryFragment().</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="comment">   * @param data Data to send</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span><span class="comment">   * @param fin Set to true if this is the final fragment of the message</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00315" data-start="{" data-end="}">
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a04886d2930a27edde176c586003949bb">  315</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a04886d2930a27edde176c586003949bb">SendFragment</a>(</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>      std::initializer_list&lt;uv::Buffer&gt; data, <span class="keywordtype">bool</span> fin,</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a46dc3f34c87556ad786b652b578cf211">SendFragment</a>({data.begin(), data.end()}, fin, std::move(callback));</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  }</div>
</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span><span class="comment"></span> </div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span><span class="comment">   * Send a ping frame with no data.</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="comment">   * @param callback Optional callback which is invoked when the ping frame</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span><span class="comment">   *                 write completes.</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00326" data-start="{" data-end="}">
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a391836465db2a677ce8ac0b3ec2d46d7">  326</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a391836465db2a677ce8ac0b3ec2d46d7">SendPing</a>(std::function&lt;<span class="keywordtype">void</span>(<a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a391836465db2a677ce8ac0b3ec2d46d7">SendPing</a>({}, [f = std::move(callback)](<span class="keyword">auto</span> bufs, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a> err) {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>      <span class="keywordflow">if</span> (f) {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        f(err);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>      }</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    });</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  }</div>
</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span><span class="comment"></span> </div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span><span class="comment">   * Send a ping frame.</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span><span class="comment">   * @param data Data to send in the ping frame</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="comment">   * @param callback Callback which is invoked when the ping frame</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span><span class="comment">   *                 write completes.</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00340" data-start="{" data-end="}">
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a66a2ca739ed5db5f19ae209f347f81a2">  340</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a66a2ca739ed5db5f19ae209f347f81a2">SendPing</a>(</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>      std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    SendControl(<a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a1d277bb3e890b7705bed635f713c3d8c">kOpPing</a>, data, std::move(callback));</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>  }</div>
</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span><span class="comment"></span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="comment">   * Send a ping frame.</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span><span class="comment">   * @param data Data to send in the ping frame</span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="comment">   * @param callback Callback which is invoked when the ping frame</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="comment">   *                 write completes.</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00352" data-start="{" data-end="}">
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#aecf04471e2a6b6c3de4d0918a2f4326f">  352</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#aecf04471e2a6b6c3de4d0918a2f4326f">SendPing</a>(</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>      std::initializer_list&lt;uv::Buffer&gt; data,</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a391836465db2a677ce8ac0b3ec2d46d7">SendPing</a>({data.begin(), data.end()}, std::move(callback));</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>  }</div>
</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span><span class="comment"></span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span><span class="comment">   * Send a pong frame with no data.</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="comment">   * @param callback Optional callback which is invoked when the pong frame</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="comment">   *                 write completes.</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00363" data-start="{" data-end="}">
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a8b5c346536bbef572f97fc179bdc06fa">  363</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a8b5c346536bbef572f97fc179bdc06fa">SendPong</a>(std::function&lt;<span class="keywordtype">void</span>(<a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a8b5c346536bbef572f97fc179bdc06fa">SendPong</a>({}, [f = std::move(callback)](<span class="keyword">auto</span> bufs, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a> err) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>      <span class="keywordflow">if</span> (f) {</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        f(err);</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>      }</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    });</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>  }</div>
</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span><span class="comment"></span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span><span class="comment">   * Send a pong frame.</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="comment">   * @param data Data to send in the pong frame</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span><span class="comment">   * @param callback Callback which is invoked when the pong frame</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span><span class="comment">   *                 write completes.</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00377" data-start="{" data-end="}">
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a7a0898f0051af2847e9c449879a0f213">  377</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a7a0898f0051af2847e9c449879a0f213">SendPong</a>(</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>      std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    SendControl(<a class="code hl_variable" href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">kFlagFin</a> | <a class="code hl_variable" href="classwpi_1_1_web_socket.html#ac73d6cba986fa122d959afe1bfdfa0ba">kOpPong</a>, data, std::move(callback));</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>  }</div>
</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span><span class="comment"></span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span><span class="comment">   * Send a pong frame.</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span><span class="comment">   * @param data Data to send in the pong frame</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span><span class="comment">   * @param callback Callback which is invoked when the pong frame</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span><span class="comment">   *                 write completes.</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span><span class="comment">   */</span></div>
<div class="foldopen" id="foldopen00389" data-start="{" data-end="}">
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#ae703818426b202f78661372738f48d37">  389</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#ae703818426b202f78661372738f48d37">SendPong</a>(</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>      std::initializer_list&lt;uv::Buffer&gt; data,</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a8b5c346536bbef572f97fc179bdc06fa">SendPong</a>({data.begin(), data.end()}, std::move(callback));</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>  }</div>
</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="comment"></span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span><span class="comment">   * Send multiple frames.</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span><span class="comment">   *</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span><span class="comment">   * @param frames Frame type/data pairs</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span><span class="comment">   * @param callback Callback which is invoked when the write completes.</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span><span class="comment">   */</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a30083c19cbcda15d5101633a8cafd5e1">  401</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a30083c19cbcda15d5101633a8cafd5e1">SendFrames</a>(</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>      std::span&lt;const Frame&gt; frames,</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback);</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="comment"></span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span><span class="comment">   * Try to send multiple frames. Tries to send as many frames as possible</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span><span class="comment">   * immediately, and only queues the &quot;last&quot; frame it can (as the network queue</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span><span class="comment">   * will almost always fill partway through a frame). The frames following</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span><span class="comment">   * the last frame will NOT be queued for transmission; the caller is</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span><span class="comment">   * responsible for how to handle (e.g. re-send) those frames (e.g. when the</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span><span class="comment">   * callback is called).</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span><span class="comment">   *</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span><span class="comment">   * @param frames Frame type/data pairs</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span><span class="comment">   * @param callback Callback which is invoked when the write completes of the</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span><span class="comment">   *                 last frame that is not returned.</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span><span class="comment">   * @return Remaining frames that will not be sent</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span><span class="comment">   */</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a5939d0c0a1f7f40a52de7860d55498c6">  418</a></span>  std::span&lt;const Frame&gt; <a class="code hl_function" href="classwpi_1_1_web_socket.html#a5939d0c0a1f7f40a52de7860d55498c6">TrySendFrames</a>(</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>      std::span&lt;const Frame&gt; frames,</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span><span class="comment"></span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span><span class="comment">   * Returns whether or not a previous TrySendFrames is still in progress.</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span><span class="comment">   * Calling TrySendFrames if this returns true will return all frames.</span></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span><span class="comment">   *</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span><span class="comment">   * @return True if a TryWrite is in progress</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span><span class="comment">   */</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a1648f6404dad9a0aabac67ec75211658">  428</a></span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a1648f6404dad9a0aabac67ec75211658">IsWriteInProgress</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_writeInProgress; }</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="comment"></span> </div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="comment">   * Fail the connection.</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span><span class="comment">   */</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a37e7be645e18430de3c1466d236437c3">  433</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a37e7be645e18430de3c1466d236437c3">Fail</a>(uint16_t <a class="code hl_variable" href="_third_party_notices_8txt.html#a84115a3d674a21b7abd56eab103ff848">code</a> = 1002, std::string_view reason = <span class="stringliteral">&quot;protocol error&quot;</span>);</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span><span class="comment"></span> </div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span><span class="comment">   * Forcibly close the connection.</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span><span class="comment">   */</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#af7d2b14ca14d8b5e7fa29fda1fc974ad">  438</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#af7d2b14ca14d8b5e7fa29fda1fc974ad">Terminate</a>(uint16_t <a class="code hl_variable" href="_third_party_notices_8txt.html#a84115a3d674a21b7abd56eab103ff848">code</a> = 1006, std::string_view reason = <span class="stringliteral">&quot;terminated&quot;</span>);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span><span class="comment"></span> </div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span><span class="comment">   * Gets user-defined data.</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span><span class="comment">   * @return User-defined data if any, nullptr otherwise.</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span><span class="comment">   */</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T = <span class="keywordtype">void</span>&gt;</div>
<div class="foldopen" id="foldopen00445" data-start="{" data-end="}">
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a32905a2ac0f7da8ca115962d46b6528c">  445</a></span>  std::shared_ptr&lt;T&gt; <a class="code hl_function" href="classwpi_1_1_web_socket.html#a32905a2ac0f7da8ca115962d46b6528c">GetData</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="keywordflow">return</span> std::static_pointer_cast&lt;T&gt;(m_data);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  }</div>
</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span><span class="comment"></span> </div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span><span class="comment">   * Sets user-defined data.</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span><span class="comment">   * @param data User-defined arbitrary data.</span></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span><span class="comment">   */</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#aae601d5e644d628ebb9295d86b007bd0">  453</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#aae601d5e644d628ebb9295d86b007bd0">SetData</a>(std::shared_ptr&lt;void&gt; data) { m_data = std::move(data); }</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span><span class="comment"></span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span><span class="comment">   * Shuts down and closes the underlying stream.</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span><span class="comment">   */</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a05c555e1888a64b4b42643809a860c30">  458</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwpi_1_1_web_socket.html#a05c555e1888a64b4b42643809a860c30">Shutdown</a>();</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span><span class="comment"></span> </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span><span class="comment">   * Gets the last time data was received on the stream.</span></div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span><span class="comment">   * @return Timestamp</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span><span class="comment">   */</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#aad2080312592a4d99d0af2882bb76183">  464</a></span>  uint64_t <a class="code hl_function" href="classwpi_1_1_web_socket.html#aad2080312592a4d99d0af2882bb76183">GetLastReceivedTime</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_lastReceivedTime; }</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span><span class="comment"></span> </div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span><span class="comment">   * Open event.  Emitted when the connection is open and ready to communicate.</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span><span class="comment">   * The parameter is the selected subprotocol.</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span><span class="comment">   */</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a43ecb040198b66d0d88a4250d56085a4">  470</a></span>  <a class="code hl_class" href="classwpi_1_1sig_1_1_signal_base.html">sig::Signal&lt;std::string_view&gt;</a> <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a43ecb040198b66d0d88a4250d56085a4">open</a>;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span><span class="comment"></span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span><span class="comment">   * Close event.  Emitted when the connection is closed.  The first parameter</span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span><span class="comment">   * is a numeric value indicating the status code explaining why the connection</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span><span class="comment">   * has been closed.  The second parameter is a human-readable string</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span><span class="comment">   * explaining the reason why the connection has been closed.</span></div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span><span class="comment">   */</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a1daec0484f6f3034717912142e3cc7e1">  478</a></span>  <a class="code hl_class" href="classwpi_1_1sig_1_1_signal_base.html">sig::Signal&lt;uint16_t, std::string_view&gt;</a> <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a1daec0484f6f3034717912142e3cc7e1">closed</a>;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span><span class="comment"></span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span><span class="comment">   * Text message event.  Emitted when a text message is received.</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span><span class="comment">   * The first parameter is the data, the second parameter is true if the</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span><span class="comment">   * data is the last fragment of the message.</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span><span class="comment">   */</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a52a220899cf024226a920822171780f0">  485</a></span>  <a class="code hl_class" href="classwpi_1_1sig_1_1_signal_base.html">sig::Signal&lt;std::string_view, bool&gt;</a> <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a52a220899cf024226a920822171780f0">text</a>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span><span class="comment"></span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span><span class="comment">   * Binary message event.  Emitted when a binary message is received.</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span><span class="comment">   * The first parameter is the data, the second parameter is true if the</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span><span class="comment">   * data is the last fragment of the message.</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span><span class="comment">   */</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a401e308948eff9581b9866c87419ea4c">  492</a></span>  <a class="code hl_class" href="classwpi_1_1sig_1_1_signal_base.html">sig::Signal&lt;std::span&lt;const uint8_t&gt;</a>, <span class="keywordtype">bool</span>&gt; <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a401e308948eff9581b9866c87419ea4c">binary</a>;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span><span class="comment"></span> </div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span><span class="comment">   * Ping event.  Emitted when a ping message is received.  A pong message is</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span><span class="comment">   * automatically sent in response, so this is simply a notification.</span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span><span class="comment">   */</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a5fc2177831263449d1c4856014dc3fb1">  498</a></span>  <a class="code hl_class" href="classwpi_1_1sig_1_1_signal_base.html">sig::Signal&lt;std::span&lt;const uint8_t&gt;</a>&gt; <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a5fc2177831263449d1c4856014dc3fb1">ping</a>;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span><span class="comment"></span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span><span class="comment">  /**</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span><span class="comment">   * Pong event.  Emitted when a pong message is received.</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span><span class="comment">   */</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno"><a class="line" href="classwpi_1_1_web_socket.html#a669e98de896eb17db6b48b6344c3aaa3">  503</a></span>  <a class="code hl_class" href="classwpi_1_1sig_1_1_signal_base.html">sig::Signal&lt;std::span&lt;const uint8_t&gt;</a>&gt; <a class="code hl_variable" href="classwpi_1_1_web_socket.html#a669e98de896eb17db6b48b6344c3aaa3">pong</a>;</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span> </div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>  <span class="comment">// user data</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>  std::shared_ptr&lt;void&gt; m_data;</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>  <span class="comment">// constructor parameters</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>  <a class="code hl_class" href="classwpi_1_1uv_1_1_stream.html">uv::Stream</a>&amp; m_stream;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>  <span class="keywordtype">bool</span> m_server;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>  <span class="comment">// subprotocol, set via constructor (server) or handshake (client)</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>  std::string m_protocol;</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>  <span class="comment">// user-settable configuration</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>  <span class="keywordtype">size_t</span> m_maxMessageSize = 128 * 1024;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>  <span class="keywordtype">bool</span> m_combineFragments = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span> </div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>  <span class="comment">// outgoing write request</span></div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>  <span class="keywordtype">bool</span> m_writeInProgress = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>  <span class="keyword">class </span>WriteReq;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>  std::weak_ptr&lt;WriteReq&gt; m_curWriteReq;</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>  std::weak_ptr&lt;WriteReq&gt; m_lastWriteReq;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>  <span class="comment">// operating state</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>  <a class="code hl_enumeration" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3">State</a> m_state = <a class="code hl_enumvalue" href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3ad9ab82201c5366392679d363f6235c25">CONNECTING</a>;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span> </div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>  <span class="comment">// incoming message buffers/state</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>  uint64_t m_lastReceivedTime = 0;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>  <a class="code hl_class" href="classwpi_1_1_small_vector.html">SmallVector&lt;uint8_t, 14&gt;</a> m_header;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>  <span class="keywordtype">size_t</span> m_headerSize = 0;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>  <a class="code hl_class" href="classwpi_1_1_small_vector.html">SmallVector&lt;uint8_t, 1024&gt;</a> m_payload;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>  <a class="code hl_class" href="classwpi_1_1_small_vector.html">SmallVector&lt;uint8_t, 64&gt;</a> m_controlPayload;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>  <span class="keywordtype">size_t</span> m_frameStart = 0;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>  uint64_t m_frameSize = UINT64_MAX;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>  uint8_t m_fragmentOpcode = 0;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>  <span class="comment">// temporary data used only during client handshake</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  <span class="keyword">class </span>ClientHandshakeData;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>  std::unique_ptr&lt;ClientHandshakeData&gt; m_clientHandshake;</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span> </div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>  <span class="keywordtype">void</span> StartClient(std::string_view uri, std::string_view host,</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                   std::span&lt;const std::string_view&gt; protocols,</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>                   <span class="keyword">const</span> <a class="code hl_struct" href="structwpi_1_1_web_socket_1_1_client_options.html">ClientOptions</a>&amp; options);</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>  <span class="keywordtype">void</span> StartServer(std::string_view key, std::string_view <a class="code hl_enumvalue" href="namespacewpi.html#a2b741829b477ec608a2534e5e5a22f67a2af72f100c356273d46284f6fd1dfc08">version</a>,</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>                   std::string_view protocol);</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>  <span class="keywordtype">void</span> SendClose(uint16_t <a class="code hl_variable" href="_third_party_notices_8txt.html#a84115a3d674a21b7abd56eab103ff848">code</a>, std::string_view reason);</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>  <span class="keywordtype">void</span> SetClosed(uint16_t <a class="code hl_variable" href="_third_party_notices_8txt.html#a84115a3d674a21b7abd56eab103ff848">code</a>, std::string_view reason, <span class="keywordtype">bool</span> failed = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>  <span class="keywordtype">void</span> HandleIncoming(<a class="code hl_class" href="classwpi_1_1uv_1_1_buffer.html">uv::Buffer</a>&amp; buf, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>  <span class="keywordtype">void</span> SendControl(</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>      uint8_t opcode, std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>      std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback);</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>  <span class="keywordtype">void</span> Send(uint8_t opcode, std::span&lt;const uv::Buffer&gt; data,</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>            std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, <a class="code hl_class" href="classwpi_1_1uv_1_1_error.html">uv::Error</a>)&gt; callback) {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <a class="code hl_function" href="classwpi_1_1_web_socket.html#a30083c19cbcda15d5101633a8cafd5e1">SendFrames</a>({{<a class="code hl_struct" href="structwpi_1_1_web_socket_1_1_frame.html">Frame</a>{opcode, data}}}, std::move(callback));</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>  }</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>  <span class="keywordtype">void</span> SendError(</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>      std::span&lt;const Frame&gt; frames,</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>      <span class="keyword">const</span> std::function&lt;<span class="keywordtype">void</span>(std::span&lt;uv::Buffer&gt;, uv::Error)&gt;&amp; callback);</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>};</div>
</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>}  <span class="comment">// namespace wpi</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span><span class="preprocessor">#endif  </span><span class="comment">// WPINET_WEBSOCKET_H_</span></div>
<div class="ttc" id="a_buffer_8h_html"><div class="ttname"><a href="_buffer_8h.html">Buffer.h</a></div></div>
<div class="ttc" id="a_error_8h_html"><div class="ttname"><a href="_error_8h.html">Error.h</a></div></div>
<div class="ttc" id="a_small_vector_8h_html"><div class="ttname"><a href="_small_vector_8h.html">SmallVector.h</a></div><div class="ttdoc">This file defines the SmallVector class.</div></div>
<div class="ttc" id="a_third_party_notices_8txt_html_a84115a3d674a21b7abd56eab103ff848"><div class="ttname"><a href="_third_party_notices_8txt.html#a84115a3d674a21b7abd56eab103ff848">code</a></div><div class="ttdeci">and restrictions which apply to each piece of software is included later in this file and or inside of the individual applicable source files The disclaimer of warranty in the WPILib license above applies to all code in and nothing in any of the other licenses gives permission to use the names of FIRST nor the names of the WPILib contributors to endorse or promote products derived from this software The following pieces of software have additional or alternate and or Google Inc All rights reserved Redistribution and use in source and binary with or without are permitted provided that the following conditions are this list of conditions and the following disclaimer *Redistributions in binary form must reproduce the above copyright this list of conditions and the following disclaimer in the documentation and or other materials provided with the distribution *Neither the name of Google Inc nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY EXPRESS OR IMPLIED BUT NOT LIMITED THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY OR CONSEQUENTIAL WHETHER IN STRICT OR EVEN IF ADVISED OF THE POSSIBILITY OF SUCH January AND DISTRIBUTION Definitions License shall mean the terms and conditions for and distribution as defined by Sections through of this document Licensor shall mean the copyright owner or entity authorized by the copyright owner that is granting the License Legal Entity shall mean the union of the acting entity and all other entities that control are controlled by or are under common control with that entity For the purposes of this definition control direct or to cause the direction or management of such whether by contract or including but not limited to software source code</div><div class="ttdef"><b>Definition</b> ThirdPartyNotices.txt:110</div></div>
<div class="ttc" id="aclasswpi_1_1_small_vector_html"><div class="ttname"><a href="classwpi_1_1_small_vector.html">wpi::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition</b> SmallVector.h:1211</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html"><div class="ttname"><a href="classwpi_1_1_web_socket.html">wpi::WebSocket</a></div><div class="ttdoc">RFC 6455 compliant WebSocket client and server implementation.</div><div class="ttdef"><b>Definition</b> WebSocket.h:34</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a02f298e21ee655cd2a765013751f6063"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a02f298e21ee655cd2a765013751f6063">wpi::WebSocket::CreateClient</a></div><div class="ttdeci">static std::shared_ptr&lt; WebSocket &gt; CreateClient(uv::Stream &amp;stream, std::string_view uri, std::string_view host, std::initializer_list&lt; std::string_view &gt; protocols, const ClientOptions &amp;options={})</div><div class="ttdoc">Starts a client connection by performing the initial client handshake.</div><div class="ttdef"><b>Definition</b> WebSocket.h:129</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a04886d2930a27edde176c586003949bb"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a04886d2930a27edde176c586003949bb">wpi::WebSocket::SendFragment</a></div><div class="ttdeci">void SendFragment(std::initializer_list&lt; uv::Buffer &gt; data, bool fin, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a continuation frame.</div><div class="ttdef"><b>Definition</b> WebSocket.h:315</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a05c555e1888a64b4b42643809a860c30"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a05c555e1888a64b4b42643809a860c30">wpi::WebSocket::Shutdown</a></div><div class="ttdeci">void Shutdown()</div><div class="ttdoc">Shuts down and closes the underlying stream.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a08c3551897d89153364c7ba78dc92437"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a08c3551897d89153364c7ba78dc92437">wpi::WebSocket::SendTextFragment</a></div><div class="ttdeci">void SendTextFragment(std::span&lt; const uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a text message fragment.</div><div class="ttdef"><b>Definition</b> WebSocket.h:250</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a1190fdad9cf854b4649781131bdc2d84"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a1190fdad9cf854b4649781131bdc2d84">wpi::WebSocket::SendText</a></div><div class="ttdeci">void SendText(std::initializer_list&lt; uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a text message.</div><div class="ttdef"><b>Definition</b> WebSocket.h:215</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a1648f6404dad9a0aabac67ec75211658"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a1648f6404dad9a0aabac67ec75211658">wpi::WebSocket::IsWriteInProgress</a></div><div class="ttdeci">bool IsWriteInProgress() const</div><div class="ttdoc">Returns whether or not a previous TrySendFrames is still in progress.</div><div class="ttdef"><b>Definition</b> WebSocket.h:428</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a1d277bb3e890b7705bed635f713c3d8c"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a1d277bb3e890b7705bed635f713c3d8c">wpi::WebSocket::kOpPing</a></div><div class="ttdeci">static constexpr uint8_t kOpPing</div><div class="ttdef"><b>Definition</b> WebSocket.h:42</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a1daec0484f6f3034717912142e3cc7e1"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a1daec0484f6f3034717912142e3cc7e1">wpi::WebSocket::closed</a></div><div class="ttdeci">sig::Signal&lt; uint16_t, std::string_view &gt; closed</div><div class="ttdoc">Close event.</div><div class="ttdef"><b>Definition</b> WebSocket.h:478</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a1e50e1fa4875baf0c09b4f052cb7c666"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a1e50e1fa4875baf0c09b4f052cb7c666">wpi::WebSocket::operator=</a></div><div class="ttdeci">WebSocket &amp; operator=(WebSocket &amp;&amp;)=delete</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a30083c19cbcda15d5101633a8cafd5e1"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a30083c19cbcda15d5101633a8cafd5e1">wpi::WebSocket::SendFrames</a></div><div class="ttdeci">void SendFrames(std::span&lt; const Frame &gt; frames, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send multiple frames.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a32905a2ac0f7da8ca115962d46b6528c"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a32905a2ac0f7da8ca115962d46b6528c">wpi::WebSocket::GetData</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; GetData() const</div><div class="ttdoc">Gets user-defined data.</div><div class="ttdef"><b>Definition</b> WebSocket.h:445</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a33887888691341aeb8acba94dc680dcc"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a33887888691341aeb8acba94dc680dcc">wpi::WebSocket::kFlagControl</a></div><div class="ttdeci">static constexpr uint8_t kFlagControl</div><div class="ttdef"><b>Definition</b> WebSocket.h:46</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a37e7be645e18430de3c1466d236437c3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a37e7be645e18430de3c1466d236437c3">wpi::WebSocket::Fail</a></div><div class="ttdeci">void Fail(uint16_t code=1002, std::string_view reason=&quot;protocol error&quot;)</div><div class="ttdoc">Fail the connection.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a391836465db2a677ce8ac0b3ec2d46d7"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a391836465db2a677ce8ac0b3ec2d46d7">wpi::WebSocket::SendPing</a></div><div class="ttdeci">void SendPing(std::function&lt; void(uv::Error)&gt; callback=nullptr)</div><div class="ttdoc">Send a ping frame with no data.</div><div class="ttdef"><b>Definition</b> WebSocket.h:326</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a3e860e642aba8af48ff635a67d609f44"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a3e860e642aba8af48ff635a67d609f44">wpi::WebSocket::kOpCont</a></div><div class="ttdeci">static constexpr uint8_t kOpCont</div><div class="ttdef"><b>Definition</b> WebSocket.h:38</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a401e308948eff9581b9866c87419ea4c"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a401e308948eff9581b9866c87419ea4c">wpi::WebSocket::binary</a></div><div class="ttdeci">sig::Signal&lt; std::span&lt; const uint8_t &gt;, bool &gt; binary</div><div class="ttdoc">Binary message event.</div><div class="ttdef"><b>Definition</b> WebSocket.h:492</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a42d638cbd0f73f2bb808d4fbdb0d6704"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a42d638cbd0f73f2bb808d4fbdb0d6704">wpi::WebSocket::operator=</a></div><div class="ttdeci">WebSocket &amp; operator=(const WebSocket &amp;)=delete</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a43ecb040198b66d0d88a4250d56085a4"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a43ecb040198b66d0d88a4250d56085a4">wpi::WebSocket::open</a></div><div class="ttdeci">sig::Signal&lt; std::string_view &gt; open</div><div class="ttdoc">Open event.</div><div class="ttdef"><b>Definition</b> WebSocket.h:470</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a46dc3f34c87556ad786b652b578cf211"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a46dc3f34c87556ad786b652b578cf211">wpi::WebSocket::SendFragment</a></div><div class="ttdeci">void SendFragment(std::span&lt; const uv::Buffer &gt; data, bool fin, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a continuation frame.</div><div class="ttdef"><b>Definition</b> WebSocket.h:302</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a52a220899cf024226a920822171780f0"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a52a220899cf024226a920822171780f0">wpi::WebSocket::text</a></div><div class="ttdeci">sig::Signal&lt; std::string_view, bool &gt; text</div><div class="ttdoc">Text message event.</div><div class="ttdef"><b>Definition</b> WebSocket.h:485</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a5809ec7745f800c6e49205f916eaabbc"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a5809ec7745f800c6e49205f916eaabbc">wpi::WebSocket::GetState</a></div><div class="ttdeci">State GetState() const</div><div class="ttdoc">Get connection state.</div><div class="ttdef"><b>Definition</b> WebSocket.h:157</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a589c9f706dc2acb0d98d991bef0867ee"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a589c9f706dc2acb0d98d991bef0867ee">wpi::WebSocket::kOpText</a></div><div class="ttdeci">static constexpr uint8_t kOpText</div><div class="ttdef"><b>Definition</b> WebSocket.h:39</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a5939d0c0a1f7f40a52de7860d55498c6"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a5939d0c0a1f7f40a52de7860d55498c6">wpi::WebSocket::TrySendFrames</a></div><div class="ttdeci">std::span&lt; const Frame &gt; TrySendFrames(std::span&lt; const Frame &gt; frames, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Try to send multiple frames.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a5fc2177831263449d1c4856014dc3fb1"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a5fc2177831263449d1c4856014dc3fb1">wpi::WebSocket::ping</a></div><div class="ttdeci">sig::Signal&lt; std::span&lt; const uint8_t &gt; &gt; ping</div><div class="ttdoc">Ping event.</div><div class="ttdef"><b>Definition</b> WebSocket.h:498</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a669e98de896eb17db6b48b6344c3aaa3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a669e98de896eb17db6b48b6344c3aaa3">wpi::WebSocket::pong</a></div><div class="ttdeci">sig::Signal&lt; std::span&lt; const uint8_t &gt; &gt; pong</div><div class="ttdoc">Pong event.</div><div class="ttdef"><b>Definition</b> WebSocket.h:503</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a66a2ca739ed5db5f19ae209f347f81a2"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a66a2ca739ed5db5f19ae209f347f81a2">wpi::WebSocket::SendPing</a></div><div class="ttdeci">void SendPing(std::span&lt; const uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a ping frame.</div><div class="ttdef"><b>Definition</b> WebSocket.h:340</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a6e883858a7406edf0942375e7fc35c9d"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a6e883858a7406edf0942375e7fc35c9d">wpi::WebSocket::IsOpen</a></div><div class="ttdeci">bool IsOpen() const</div><div class="ttdoc">Return if the connection is open.</div><div class="ttdef"><b>Definition</b> WebSocket.h:163</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a6f6690c53c643f3064125a5ecae4757d"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a6f6690c53c643f3064125a5ecae4757d">wpi::WebSocket::kOpClose</a></div><div class="ttdeci">static constexpr uint8_t kOpClose</div><div class="ttdef"><b>Definition</b> WebSocket.h:41</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a767b9ee610b2638448e936302cd3b1b3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3">wpi::WebSocket::State</a></div><div class="ttdeci">State</div><div class="ttdoc">Connection states.</div><div class="ttdef"><b>Definition</b> WebSocket.h:58</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a767b9ee610b2638448e936302cd3b1b3a06c3f1c02bda119cc99bb48434b534b3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a06c3f1c02bda119cc99bb48434b534b3">wpi::WebSocket::CLOSING</a></div><div class="ttdeci">@ CLOSING</div><div class="ttdoc">The connection is in the process of closing.</div><div class="ttdef"><b>Definition</b> WebSocket.h:64</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a767b9ee610b2638448e936302cd3b1b3a23d5c7149dc9a7b0ba15ca3479d77f8a"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a23d5c7149dc9a7b0ba15ca3479d77f8a">wpi::WebSocket::CLOSED</a></div><div class="ttdeci">@ CLOSED</div><div class="ttdoc">The connection is closed.</div><div class="ttdef"><b>Definition</b> WebSocket.h:68</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a767b9ee610b2638448e936302cd3b1b3a7cdf46d1415e2440640848a0ffeef926"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a7cdf46d1415e2440640848a0ffeef926">wpi::WebSocket::OPEN</a></div><div class="ttdeci">@ OPEN</div><div class="ttdoc">The connection is open and ready to communicate.</div><div class="ttdef"><b>Definition</b> WebSocket.h:62</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a767b9ee610b2638448e936302cd3b1b3a9d850e9667a5ed87f9755a566fdd08e7"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3a9d850e9667a5ed87f9755a566fdd08e7">wpi::WebSocket::FAILED</a></div><div class="ttdeci">@ FAILED</div><div class="ttdoc">The connection failed.</div><div class="ttdef"><b>Definition</b> WebSocket.h:66</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a767b9ee610b2638448e936302cd3b1b3ad9ab82201c5366392679d363f6235c25"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a767b9ee610b2638448e936302cd3b1b3ad9ab82201c5366392679d363f6235c25">wpi::WebSocket::CONNECTING</a></div><div class="ttdeci">@ CONNECTING</div><div class="ttdoc">The connection is not yet open.</div><div class="ttdef"><b>Definition</b> WebSocket.h:60</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a7a0898f0051af2847e9c449879a0f213"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a7a0898f0051af2847e9c449879a0f213">wpi::WebSocket::SendPong</a></div><div class="ttdeci">void SendPong(std::span&lt; const uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a pong frame.</div><div class="ttdef"><b>Definition</b> WebSocket.h:377</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a7ce14bfd88e74935f110cd48943479fb"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a7ce14bfd88e74935f110cd48943479fb">wpi::WebSocket::SendBinaryFragment</a></div><div class="ttdeci">void SendBinaryFragment(std::span&lt; const uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a text message fragment.</div><div class="ttdef"><b>Definition</b> WebSocket.h:276</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a80946a893e0ff08763281d9743c845f3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a80946a893e0ff08763281d9743c845f3">wpi::WebSocket::Close</a></div><div class="ttdeci">void Close(uint16_t code=1005, std::string_view reason={})</div><div class="ttdoc">Initiate a closing handshake.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a8b5c346536bbef572f97fc179bdc06fa"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a8b5c346536bbef572f97fc179bdc06fa">wpi::WebSocket::SendPong</a></div><div class="ttdeci">void SendPong(std::function&lt; void(uv::Error)&gt; callback=nullptr)</div><div class="ttdoc">Send a pong frame with no data.</div><div class="ttdef"><b>Definition</b> WebSocket.h:363</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a8bc1b5b8dc1585b9e98f25195012bc4a"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a8bc1b5b8dc1585b9e98f25195012bc4a">wpi::WebSocket::~WebSocket</a></div><div class="ttdeci">~WebSocket()</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a90d39961a858a8b924e9fa9de269b539"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a90d39961a858a8b924e9fa9de269b539">wpi::WebSocket::WebSocket</a></div><div class="ttdeci">WebSocket(const WebSocket &amp;)=delete</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a91408b482c42017193f6d8917c9da571"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a91408b482c42017193f6d8917c9da571">wpi::WebSocket::kOpBinary</a></div><div class="ttdeci">static constexpr uint8_t kOpBinary</div><div class="ttdef"><b>Definition</b> WebSocket.h:40</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a9d931162b8b151746dc9d75565d52d28"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a9d931162b8b151746dc9d75565d52d28">wpi::WebSocket::CreateServer</a></div><div class="ttdeci">static std::shared_ptr&lt; WebSocket &gt; CreateServer(uv::Stream &amp;stream, std::string_view key, std::string_view version, std::string_view protocol={})</div><div class="ttdoc">Starts a server connection by performing the initial server side handshake.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a9eb36dee2f7319a43cd4a794cf635262"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a9eb36dee2f7319a43cd4a794cf635262">wpi::WebSocket::SetCombineFragments</a></div><div class="ttdeci">void SetCombineFragments(bool combine)</div><div class="ttdoc">Set whether or not fragmented frames should be combined.</div><div class="ttdef"><b>Definition</b> WebSocket.h:189</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_a9ffaf926eea5310f9ae7102bb88af9c3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#a9ffaf926eea5310f9ae7102bb88af9c3">wpi::WebSocket::kFlagFin</a></div><div class="ttdeci">static constexpr uint8_t kFlagFin</div><div class="ttdef"><b>Definition</b> WebSocket.h:45</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_aad2080312592a4d99d0af2882bb76183"><div class="ttname"><a href="classwpi_1_1_web_socket.html#aad2080312592a4d99d0af2882bb76183">wpi::WebSocket::GetLastReceivedTime</a></div><div class="ttdeci">uint64_t GetLastReceivedTime() const</div><div class="ttdoc">Gets the last time data was received on the stream.</div><div class="ttdef"><b>Definition</b> WebSocket.h:464</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_aae601d5e644d628ebb9295d86b007bd0"><div class="ttname"><a href="classwpi_1_1_web_socket.html#aae601d5e644d628ebb9295d86b007bd0">wpi::WebSocket::SetData</a></div><div class="ttdeci">void SetData(std::shared_ptr&lt; void &gt; data)</div><div class="ttdoc">Sets user-defined data.</div><div class="ttdef"><b>Definition</b> WebSocket.h:453</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_aafc1614792abba79f234f6fcaaa9f0d0"><div class="ttname"><a href="classwpi_1_1_web_socket.html#aafc1614792abba79f234f6fcaaa9f0d0">wpi::WebSocket::GetProtocol</a></div><div class="ttdeci">std::string_view GetProtocol() const</div><div class="ttdoc">Get the selected sub-protocol.</div><div class="ttdef"><b>Definition</b> WebSocket.h:173</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ab386ef356db98b06265b13eb3bba05fd"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ab386ef356db98b06265b13eb3bba05fd">wpi::WebSocket::WebSocket</a></div><div class="ttdeci">WebSocket(uv::Stream &amp;stream, bool server, const private_init &amp;)</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ab5a49f53b1ecefaf296801cbf8fd2f87"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ab5a49f53b1ecefaf296801cbf8fd2f87">wpi::WebSocket::SendBinary</a></div><div class="ttdeci">void SendBinary(std::initializer_list&lt; uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a binary message.</div><div class="ttdef"><b>Definition</b> WebSocket.h:237</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ab82d685aa3034522d9e8696a101020b3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ab82d685aa3034522d9e8696a101020b3">wpi::WebSocket::CreateClient</a></div><div class="ttdeci">static std::shared_ptr&lt; WebSocket &gt; CreateClient(uv::Stream &amp;stream, std::string_view uri, std::string_view host, std::span&lt; const std::string_view &gt; protocols={}, const ClientOptions &amp;options={})</div><div class="ttdoc">Starts a client connection by performing the initial client handshake.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_abb34699e433a0bc7af46dee3f5be2fd3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#abb34699e433a0bc7af46dee3f5be2fd3">wpi::WebSocket::GetStream</a></div><div class="ttdeci">uv::Stream &amp; GetStream() const</div><div class="ttdoc">Get the underlying stream.</div><div class="ttdef"><b>Definition</b> WebSocket.h:168</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ac1e2e36e425d1ed64d536753adb81b01"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ac1e2e36e425d1ed64d536753adb81b01">wpi::WebSocket::kOpMask</a></div><div class="ttdeci">static constexpr uint8_t kOpMask</div><div class="ttdef"><b>Definition</b> WebSocket.h:44</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ac73d6cba986fa122d959afe1bfdfa0ba"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ac73d6cba986fa122d959afe1bfdfa0ba">wpi::WebSocket::kOpPong</a></div><div class="ttdeci">static constexpr uint8_t kOpPong</div><div class="ttdef"><b>Definition</b> WebSocket.h:43</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ac76103c69a78862e1268a9e418ff8e83"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ac76103c69a78862e1268a9e418ff8e83">wpi::WebSocket::SendBinary</a></div><div class="ttdeci">void SendBinary(std::span&lt; const uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a binary message.</div><div class="ttdef"><b>Definition</b> WebSocket.h:226</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ad10736e216020a696b27108c3aef0fd3"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ad10736e216020a696b27108c3aef0fd3">wpi::WebSocket::SendBinaryFragment</a></div><div class="ttdeci">void SendBinaryFragment(std::initializer_list&lt; uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a text message fragment.</div><div class="ttdef"><b>Definition</b> WebSocket.h:289</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ad8ed71cfabb44f5ccfdd9069d6958444"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ad8ed71cfabb44f5ccfdd9069d6958444">wpi::WebSocket::SetMaxMessageSize</a></div><div class="ttdeci">void SetMaxMessageSize(size_t size)</div><div class="ttdoc">Set the maximum message size.</div><div class="ttdef"><b>Definition</b> WebSocket.h:181</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ada155c42b0c46d236813a968dcbaee4a"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ada155c42b0c46d236813a968dcbaee4a">wpi::WebSocket::SendText</a></div><div class="ttdeci">void SendText(std::span&lt; const uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a text message.</div><div class="ttdef"><b>Definition</b> WebSocket.h:204</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_ae703818426b202f78661372738f48d37"><div class="ttname"><a href="classwpi_1_1_web_socket.html#ae703818426b202f78661372738f48d37">wpi::WebSocket::SendPong</a></div><div class="ttdeci">void SendPong(std::initializer_list&lt; uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a pong frame.</div><div class="ttdef"><b>Definition</b> WebSocket.h:389</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_aecf04471e2a6b6c3de4d0918a2f4326f"><div class="ttname"><a href="classwpi_1_1_web_socket.html#aecf04471e2a6b6c3de4d0918a2f4326f">wpi::WebSocket::SendPing</a></div><div class="ttdeci">void SendPing(std::initializer_list&lt; uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a ping frame.</div><div class="ttdef"><b>Definition</b> WebSocket.h:352</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_af2cf00cdc05cff940d621618ab737e1c"><div class="ttname"><a href="classwpi_1_1_web_socket.html#af2cf00cdc05cff940d621618ab737e1c">wpi::WebSocket::SendTextFragment</a></div><div class="ttdeci">void SendTextFragment(std::initializer_list&lt; uv::Buffer &gt; data, std::function&lt; void(std::span&lt; uv::Buffer &gt;, uv::Error)&gt; callback)</div><div class="ttdoc">Send a text message fragment.</div><div class="ttdef"><b>Definition</b> WebSocket.h:263</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_af7d2b14ca14d8b5e7fa29fda1fc974ad"><div class="ttname"><a href="classwpi_1_1_web_socket.html#af7d2b14ca14d8b5e7fa29fda1fc974ad">wpi::WebSocket::Terminate</a></div><div class="ttdeci">void Terminate(uint16_t code=1006, std::string_view reason=&quot;terminated&quot;)</div><div class="ttdoc">Forcibly close the connection.</div></div>
<div class="ttc" id="aclasswpi_1_1_web_socket_html_afac10196362eb4251fb4b818c322e60b"><div class="ttname"><a href="classwpi_1_1_web_socket.html#afac10196362eb4251fb4b818c322e60b">wpi::WebSocket::WebSocket</a></div><div class="ttdeci">WebSocket(WebSocket &amp;&amp;)=delete</div></div>
<div class="ttc" id="aclasswpi_1_1sig_1_1_signal_base_html"><div class="ttname"><a href="classwpi_1_1sig_1_1_signal_base.html">wpi::sig::SignalBase</a></div><div class="ttdoc">SignalBase is an implementation of the observer pattern, through the use of an emitting object and sl...</div><div class="ttdef"><b>Definition</b> Signal.h:495</div></div>
<div class="ttc" id="aclasswpi_1_1uv_1_1_buffer_html"><div class="ttname"><a href="classwpi_1_1uv_1_1_buffer.html">wpi::uv::Buffer</a></div><div class="ttdoc">Data buffer.</div><div class="ttdef"><b>Definition</b> Buffer.h:23</div></div>
<div class="ttc" id="aclasswpi_1_1uv_1_1_error_html"><div class="ttname"><a href="classwpi_1_1uv_1_1_error.html">wpi::uv::Error</a></div><div class="ttdoc">Error code.</div><div class="ttdef"><b>Definition</b> Error.h:15</div></div>
<div class="ttc" id="aclasswpi_1_1uv_1_1_stream_html"><div class="ttname"><a href="classwpi_1_1uv_1_1_stream.html">wpi::uv::Stream</a></div><div class="ttdoc">Stream handle.</div><div class="ttdef"><b>Definition</b> Stream.h:68</div></div>
<div class="ttc" id="aclasswpi_1_1uv_1_1_timer_html_ad766cbba1cd9695e8ba2fbff6d8e0485"><div class="ttname"><a href="classwpi_1_1uv_1_1_timer.html#ad766cbba1cd9695e8ba2fbff6d8e0485">wpi::uv::Timer::Time</a></div><div class="ttdeci">std::chrono::duration&lt; uint64_t, std::milli &gt; Time</div><div class="ttdef"><b>Definition</b> Timer.h:31</div></div>
<div class="ttc" id="anamespacewpi_html"><div class="ttname"><a href="namespacewpi.html">wpi</a></div><div class="ttdoc">Foonathan namespace.</div><div class="ttdef"><b>Definition</b> ntcore_cpp.h:26</div></div>
<div class="ttc" id="anamespacewpi_html_a2b741829b477ec608a2534e5e5a22f67a2af72f100c356273d46284f6fd1dfc08"><div class="ttname"><a href="namespacewpi.html#a2b741829b477ec608a2534e5e5a22f67a2af72f100c356273d46284f6fd1dfc08">wpi::default_arguments::version</a></div><div class="ttdeci">@ version</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_client_options_html"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_client_options.html">wpi::WebSocket::ClientOptions</a></div><div class="ttdoc">Client connection options.</div><div class="ttdef"><b>Definition</b> WebSocket.h:74</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_client_options_html_a8151a3ab73093622ed51639adf1a4a70"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_client_options.html#a8151a3ab73093622ed51639adf1a4a70">wpi::WebSocket::ClientOptions::handshakeTimeout</a></div><div class="ttdeci">uv::Timer::Time handshakeTimeout</div><div class="ttdoc">Timeout for the handshake request.</div><div class="ttdef"><b>Definition</b> WebSocket.h:78</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_client_options_html_aa64e8dec5304497458a7b37624809d6a"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_client_options.html#aa64e8dec5304497458a7b37624809d6a">wpi::WebSocket::ClientOptions::ClientOptions</a></div><div class="ttdeci">ClientOptions()</div><div class="ttdef"><b>Definition</b> WebSocket.h:75</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_client_options_html_adfad68a6329a344cda2850e9f694b9f5"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_client_options.html#adfad68a6329a344cda2850e9f694b9f5">wpi::WebSocket::ClientOptions::extraHeaders</a></div><div class="ttdeci">std::span&lt; const std::pair&lt; std::string_view, std::string_view &gt; &gt; extraHeaders</div><div class="ttdoc">Additional headers to include in handshake.</div><div class="ttdef"><b>Definition</b> WebSocket.h:81</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html">wpi::WebSocket::Frame</a></div><div class="ttdoc">Frame.</div><div class="ttdef"><b>Definition</b> WebSocket.h:87</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_a0fe203cd29ceb33efb9e13b88f041213"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#a0fe203cd29ceb33efb9e13b88f041213">wpi::WebSocket::Frame::Frame</a></div><div class="ttdeci">constexpr Frame(uint8_t opcode, std::span&lt; const uv::Buffer &gt; data)</div><div class="ttdef"><b>Definition</b> WebSocket.h:97</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_a248d9a26ef6e327c88e90c1b6afd3ee1"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#a248d9a26ef6e327c88e90c1b6afd3ee1">wpi::WebSocket::Frame::kPing</a></div><div class="ttdeci">static constexpr uint8_t kPing</div><div class="ttdef"><b>Definition</b> WebSocket.h:94</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_a39afe94474d2f7f9a80674586c4cae2e"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#a39afe94474d2f7f9a80674586c4cae2e">wpi::WebSocket::Frame::kPong</a></div><div class="ttdeci">static constexpr uint8_t kPong</div><div class="ttdef"><b>Definition</b> WebSocket.h:95</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_a914e7533bd0f9524be0572aa514ae512"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#a914e7533bd0f9524be0572aa514ae512">wpi::WebSocket::Frame::kFragment</a></div><div class="ttdeci">static constexpr uint8_t kFragment</div><div class="ttdef"><b>Definition</b> WebSocket.h:92</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_a96f3b0d51e37df0e436bc70845c738a3"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#a96f3b0d51e37df0e436bc70845c738a3">wpi::WebSocket::Frame::kBinaryFragment</a></div><div class="ttdeci">static constexpr uint8_t kBinaryFragment</div><div class="ttdef"><b>Definition</b> WebSocket.h:91</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_a9ad6d44206f9cf2ad665c9347481d425"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#a9ad6d44206f9cf2ad665c9347481d425">wpi::WebSocket::Frame::data</a></div><div class="ttdeci">std::span&lt; const uv::Buffer &gt; data</div><div class="ttdef"><b>Definition</b> WebSocket.h:101</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_aa97f56b3b9043042a4e9fa361096b491"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#aa97f56b3b9043042a4e9fa361096b491">wpi::WebSocket::Frame::kText</a></div><div class="ttdeci">static constexpr uint8_t kText</div><div class="ttdef"><b>Definition</b> WebSocket.h:88</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_acd36ec8167a3280b5015474dd5dae43f"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#acd36ec8167a3280b5015474dd5dae43f">wpi::WebSocket::Frame::kFinalFragment</a></div><div class="ttdeci">static constexpr uint8_t kFinalFragment</div><div class="ttdef"><b>Definition</b> WebSocket.h:93</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_ad89f72b281d473a92d48a8262913e5f4"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#ad89f72b281d473a92d48a8262913e5f4">wpi::WebSocket::Frame::opcode</a></div><div class="ttdeci">uint8_t opcode</div><div class="ttdef"><b>Definition</b> WebSocket.h:100</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_af2db548bf155bcb8693c5b02813e3deb"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#af2db548bf155bcb8693c5b02813e3deb">wpi::WebSocket::Frame::kTextFragment</a></div><div class="ttdeci">static constexpr uint8_t kTextFragment</div><div class="ttdef"><b>Definition</b> WebSocket.h:90</div></div>
<div class="ttc" id="astructwpi_1_1_web_socket_1_1_frame_html_af7744e7c7e7abd3be5a3ff3168ddb33a"><div class="ttname"><a href="structwpi_1_1_web_socket_1_1_frame.html#af7744e7c7e7abd3be5a3ff3168ddb33a">wpi::WebSocket::Frame::kBinary</a></div><div class="ttdeci">static constexpr uint8_t kBinary</div><div class="ttdef"><b>Definition</b> WebSocket.h:89</div></div>
<div class="ttc" id="awpinet_2src_2main_2native_2include_2wpinet_2uv_2_timer_8h_html"><div class="ttname"><a href="wpinet_2src_2main_2native_2include_2wpinet_2uv_2_timer_8h.html">Timer.h</a></div></div>
<div class="ttc" id="awpiutil_2src_2main_2native_2thirdparty_2sigslot_2include_2wpi_2_signal_8h_html"><div class="ttname"><a href="wpiutil_2src_2main_2native_2thirdparty_2sigslot_2include_2wpi_2_signal_8h.html">Signal.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4e20957744827ba5726af139111576a9.html">wpinet</a></li><li class="navelem"><a class="el" href="_web_socket_8h.html">WebSocket.h</a></li>
    <li class="footer">Generated on Sun Oct 13 2024 07:18:57 for WPILibC++ by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
