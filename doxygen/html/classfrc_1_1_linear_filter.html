<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WPILibC++: frc::LinearFilter&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="wpilib-128.png"/></td>
  <td id="projectalign">
   <div id="projectname">WPILibC++<span id="projectnumber">&#160;2025.1.1-beta-1-35-g9a5f73d</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classfrc_1_1_linear_filter.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classfrc_1_1_linear_filter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">frc::LinearFilter&lt; T &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class implements a linear, digital filter.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_linear_filter_8h_source.html">frc/filter/LinearFilter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3948ab7d0c3b87a34470452fa3bd567f" id="r_a3948ab7d0c3b87a34470452fa3bd567f"><td class="memItemLeft" align="right" valign="top">constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3948ab7d0c3b87a34470452fa3bd567f">LinearFilter</a> (std::span&lt; const double &gt; ffGains, std::span&lt; const double &gt; fbGains)</td></tr>
<tr class="memdesc:a3948ab7d0c3b87a34470452fa3bd567f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a linear FIR or IIR filter.  <br /></td></tr>
<tr class="separator:a3948ab7d0c3b87a34470452fa3bd567f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1867e1bb03af49b7d15c569a794a2e" id="r_ada1867e1bb03af49b7d15c569a794a2e"><td class="memItemLeft" align="right" valign="top">constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada1867e1bb03af49b7d15c569a794a2e">LinearFilter</a> (std::initializer_list&lt; double &gt; ffGains, std::initializer_list&lt; double &gt; fbGains)</td></tr>
<tr class="memdesc:ada1867e1bb03af49b7d15c569a794a2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a linear FIR or IIR filter.  <br /></td></tr>
<tr class="separator:ada1867e1bb03af49b7d15c569a794a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac29bde247865221c91123b503efda74" id="r_aac29bde247865221c91123b503efda74"><td class="memItemLeft" align="right" valign="top">constexpr void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac29bde247865221c91123b503efda74">Reset</a> ()</td></tr>
<tr class="memdesc:aac29bde247865221c91123b503efda74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the filter state.  <br /></td></tr>
<tr class="separator:aac29bde247865221c91123b503efda74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e6b7a38994d15c641e96249ae0183a" id="r_a96e6b7a38994d15c641e96249ae0183a"><td class="memItemLeft" align="right" valign="top">constexpr void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96e6b7a38994d15c641e96249ae0183a">Reset</a> (std::span&lt; const T &gt; inputBuffer, std::span&lt; const T &gt; outputBuffer)</td></tr>
<tr class="memdesc:a96e6b7a38994d15c641e96249ae0183a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the filter state, initializing internal buffers to the provided values.  <br /></td></tr>
<tr class="separator:a96e6b7a38994d15c641e96249ae0183a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ead98a2dbef628c7eddebec75b11fe" id="r_ac6ead98a2dbef628c7eddebec75b11fe"><td class="memItemLeft" align="right" valign="top">constexpr T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6ead98a2dbef628c7eddebec75b11fe">Calculate</a> (T input)</td></tr>
<tr class="memdesc:ac6ead98a2dbef628c7eddebec75b11fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the next value of the filter.  <br /></td></tr>
<tr class="separator:ac6ead98a2dbef628c7eddebec75b11fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe511041f8835dc115c5f0084014779b" id="r_afe511041f8835dc115c5f0084014779b"><td class="memItemLeft" align="right" valign="top">constexpr T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe511041f8835dc115c5f0084014779b">LastValue</a> () const</td></tr>
<tr class="memdesc:afe511041f8835dc115c5f0084014779b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the last value calculated by the <a class="el" href="classfrc_1_1_linear_filter.html" title="This class implements a linear, digital filter.">LinearFilter</a>.  <br /></td></tr>
<tr class="separator:afe511041f8835dc115c5f0084014779b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:add4387e213a0a8ea1dae1e2bf39e0b0b" id="r_add4387e213a0a8ea1dae1e2bf39e0b0b"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add4387e213a0a8ea1dae1e2bf39e0b0b">SinglePoleIIR</a> (double timeConstant, units::second_t period)</td></tr>
<tr class="memdesc:add4387e213a0a8ea1dae1e2bf39e0b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a one-pole IIR low-pass filter of the form:<br  />
 y[n] = (1 - gain) x[n] + gain y[n-1]<br  />
 where gain = e<sup>-dt / T</sup>, T is the time constant in seconds.  <br /></td></tr>
<tr class="separator:add4387e213a0a8ea1dae1e2bf39e0b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9770190b42819a1234a6ee58044fe159" id="r_a9770190b42819a1234a6ee58044fe159"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9770190b42819a1234a6ee58044fe159">HighPass</a> (double timeConstant, units::second_t period)</td></tr>
<tr class="memdesc:a9770190b42819a1234a6ee58044fe159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a first-order high-pass filter of the form:<br  />
 y[n] = gain x[n] + (-gain) x[n-1] + gain y[n-1]<br  />
 where gain = e<sup>-dt / T</sup>, T is the time constant in seconds.  <br /></td></tr>
<tr class="separator:a9770190b42819a1234a6ee58044fe159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82095916400744938dcd6a4103925743" id="r_a82095916400744938dcd6a4103925743"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82095916400744938dcd6a4103925743">MovingAverage</a> (int taps)</td></tr>
<tr class="memdesc:a82095916400744938dcd6a4103925743"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a K-tap FIR moving average filter of the form:<br  />
 y[n] = 1/k (x[k] + x[k-1] + … + x[0])  <br /></td></tr>
<tr class="separator:a82095916400744938dcd6a4103925743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76eb72afabe59bdcd7a88964c9d111a4" id="r_a76eb72afabe59bdcd7a88964c9d111a4"><td class="memTemplParams" colspan="2">template&lt;int Derivative, int Samples&gt; </td></tr>
<tr class="memitem:a76eb72afabe59bdcd7a88964c9d111a4"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a76eb72afabe59bdcd7a88964c9d111a4">FiniteDifference</a> (const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; int, Samples &gt; &amp;stencil, units::second_t period)</td></tr>
<tr class="memdesc:a76eb72afabe59bdcd7a88964c9d111a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a finite difference filter that computes the nth derivative of the input given the specified stencil points.  <br /></td></tr>
<tr class="separator:a76eb72afabe59bdcd7a88964c9d111a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d8d9b86c5f88f100a4a8bdcdd5d8db8" id="r_a6d8d9b86c5f88f100a4a8bdcdd5d8db8"><td class="memTemplParams" colspan="2">template&lt;int Derivative, int Samples&gt; </td></tr>
<tr class="memitem:a6d8d9b86c5f88f100a4a8bdcdd5d8db8"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a6d8d9b86c5f88f100a4a8bdcdd5d8db8">BackwardFiniteDifference</a> (units::second_t period)</td></tr>
<tr class="memdesc:a6d8d9b86c5f88f100a4a8bdcdd5d8db8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a backward finite difference filter that computes the nth derivative of the input given the specified number of samples.  <br /></td></tr>
<tr class="separator:a6d8d9b86c5f88f100a4a8bdcdd5d8db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class T&gt;<br />
class frc::LinearFilter&lt; T &gt;</div><p>This class implements a linear, digital filter. </p>
<p>All types of FIR and IIR filters are supported. Static factory methods are provided to create commonly used types of filters.</p>
<p>Filters are of the form:<br  />
 y[n] = (b0 x[n] + b1 x[n-1] + … + bP x[n-P]) - (a0 y[n-1] + a2 y[n-2] + … + aQ y[n-Q])</p>
<p>Where:<br  />
 y[n] is the output at time "n"<br  />
 x[n] is the input at time "n"<br  />
 y[n-1] is the output from the LAST time step ("n-1")<br  />
 x[n-1] is the input from the LAST time step ("n-1")<br  />
 b0 … bP are the "feedforward" (FIR) gains<br  />
 a0 … aQ are the "feedback" (IIR) gains<br  />
 IMPORTANT! Note the "-" sign in front of the feedback term! This is a common convention in signal processing.</p>
<p>What can linear filters do? Basically, they can filter, or diminish, the effects of undesirable input frequencies. High frequencies, or rapid changes, can be indicative of sensor noise or be otherwise undesirable. A "low pass" filter smooths out the signal, reducing the impact of these high frequency components. Likewise, a "high pass" filter gets rid of slow-moving signal components, letting you detect large changes more easily.</p>
<p>Example FRC applications of filters:</p><ul>
<li>Getting rid of noise from an analog sensor input (note: the roboRIO's FPGA can do this faster in hardware)</li>
<li>Smoothing out joystick input to prevent the wheels from slipping or the robot from tipping</li>
<li>Smoothing motor commands so that unnecessary strain isn't put on electrical or mechanical components</li>
<li>If you use clever gains, you can make a PID controller out of this class!</li>
</ul>
<p>For more on filters, we highly recommend the following articles:<br  />
 <a href="https://en.wikipedia.org/wiki/Linear_filter">https://en.wikipedia.org/wiki/Linear_filter</a><br  />
 <a href="https://en.wikipedia.org/wiki/Iir_filter">https://en.wikipedia.org/wiki/Iir_filter</a><br  />
 <a href="https://en.wikipedia.org/wiki/Fir_filter">https://en.wikipedia.org/wiki/Fir_filter</a><br  />
</p>
<p>Note 1: <a class="el" href="#ac6ead98a2dbef628c7eddebec75b11fe" title="Calculates the next value of the filter.">Calculate()</a> should be called by the user on a known, regular period. You can use a <a class="el" href="classfrc_1_1_notifier.html" title="Notifiers run a user-provided callback function on a separate thread.">Notifier</a> for this or do it "inline" with code in a periodic function.</p>
<p>Note 2: For ALL filters, gains are necessarily a function of frequency. If you make a filter that works well for you at, say, 100Hz, you will most definitely need to adjust the gains if you then want to run it at 200Hz! Combining this with Note 1 - the impetus is on YOU as a developer to make sure <a class="el" href="#ac6ead98a2dbef628c7eddebec75b11fe" title="Calculates the next value of the filter.">Calculate()</a> gets called at the desired, constant frequency! </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3948ab7d0c3b87a34470452fa3bd567f" name="a3948ab7d0c3b87a34470452fa3bd567f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3948ab7d0c3b87a34470452fa3bd567f">&#9670;&#160;</a></span>LinearFilter() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::LinearFilter </td>
          <td>(</td>
          <td class="paramtype">std::span&lt; const double &gt;</td>          <td class="paramname"><span class="paramname"><em>ffGains</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::span&lt; const double &gt;</td>          <td class="paramname"><span class="paramname"><em>fbGains</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a linear FIR or IIR filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ffGains</td><td>The "feedforward" or FIR gains. </td></tr>
    <tr><td class="paramname">fbGains</td><td>The "feedback" or IIR gains. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ada1867e1bb03af49b7d15c569a794a2e" name="ada1867e1bb03af49b7d15c569a794a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada1867e1bb03af49b7d15c569a794a2e">&#9670;&#160;</a></span>LinearFilter() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::LinearFilter </td>
          <td>(</td>
          <td class="paramtype">std::initializer_list&lt; double &gt;</td>          <td class="paramname"><span class="paramname"><em>ffGains</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::initializer_list&lt; double &gt;</td>          <td class="paramname"><span class="paramname"><em>fbGains</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a linear FIR or IIR filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ffGains</td><td>The "feedforward" or FIR gains. </td></tr>
    <tr><td class="paramname">fbGains</td><td>The "feedback" or IIR gains. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6d8d9b86c5f88f100a4a8bdcdd5d8db8" name="a6d8d9b86c5f88f100a4a8bdcdd5d8db8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d8d9b86c5f88f100a4a8bdcdd5d8db8">&#9670;&#160;</a></span>BackwardFiniteDifference()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<div class="memtemplate">
template&lt;int Derivative, int Samples&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt; <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::BackwardFiniteDifference </td>
          <td>(</td>
          <td class="paramtype">units::second_t</td>          <td class="paramname"><span class="paramname"><em>period</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a backward finite difference filter that computes the nth derivative of the input given the specified number of samples. </p>
<p>For example, a first derivative filter that uses two samples and a sample period of 20 ms would be</p>
<pre><code>
LinearFilter&lt;double&gt;::BackwardFiniteDifference&lt;1, 2&gt;(20_ms);
</code></pre><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Derivative</td><td>The order of the derivative to compute. </td></tr>
    <tr><td class="paramname">Samples</td><td>The number of samples to use to compute the given derivative. This must be one more than the order of derivative or higher. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">period</td><td>The period in seconds between samples taken by the user. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac6ead98a2dbef628c7eddebec75b11fe" name="ac6ead98a2dbef628c7eddebec75b11fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6ead98a2dbef628c7eddebec75b11fe">&#9670;&#160;</a></span>Calculate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::Calculate </td>
          <td>(</td>
          <td class="paramtype">T</td>          <td class="paramname"><span class="paramname"><em>input</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the next value of the filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>Current input value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The filtered value at this step </dd></dl>

</div>
</div>
<a id="a76eb72afabe59bdcd7a88964c9d111a4" name="a76eb72afabe59bdcd7a88964c9d111a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76eb72afabe59bdcd7a88964c9d111a4">&#9670;&#160;</a></span>FiniteDifference()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<div class="memtemplate">
template&lt;int Derivative, int Samples&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt; <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::FiniteDifference </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; int, Samples &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>stencil</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t</td>          <td class="paramname"><span class="paramname"><em>period</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a finite difference filter that computes the nth derivative of the input given the specified stencil points. </p>
<p>Stencil points are the indices of the samples to use in the finite difference. 0 is the current sample, -1 is the previous sample, -2 is the sample before that, etc. Don't use positive stencil points (samples from the future) if the <a class="el" href="classfrc_1_1_linear_filter.html" title="This class implements a linear, digital filter.">LinearFilter</a> will be used for stream-based online filtering (e.g., taking derivative of encoder samples in real-time).</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Derivative</td><td>The order of the derivative to compute. </td></tr>
    <tr><td class="paramname">Samples</td><td>The number of samples to use to compute the given derivative. This must be one more than the order of the derivative or higher. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stencil</td><td>List of stencil points. </td></tr>
    <tr><td class="paramname">period</td><td>The period in seconds between samples taken by the user. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9770190b42819a1234a6ee58044fe159" name="a9770190b42819a1234a6ee58044fe159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9770190b42819a1234a6ee58044fe159">&#9670;&#160;</a></span>HighPass()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt; <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::HighPass </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>timeConstant</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t</td>          <td class="paramname"><span class="paramname"><em>period</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a first-order high-pass filter of the form:<br  />
 y[n] = gain x[n] + (-gain) x[n-1] + gain y[n-1]<br  />
 where gain = e<sup>-dt / T</sup>, T is the time constant in seconds. </p>
<p>Note: T = 1 / (2 pi f) where f is the cutoff frequency in Hz, the frequency below which the input starts to attenuate.</p>
<p>This filter is stable for time constants greater than zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeConstant</td><td>The discrete-time time constant in seconds. </td></tr>
    <tr><td class="paramname">period</td><td>The period in seconds between samples taken by the user. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe511041f8835dc115c5f0084014779b" name="afe511041f8835dc115c5f0084014779b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe511041f8835dc115c5f0084014779b">&#9670;&#160;</a></span>LastValue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::LastValue </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the last value calculated by the <a class="el" href="classfrc_1_1_linear_filter.html" title="This class implements a linear, digital filter.">LinearFilter</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>The last value. </dd></dl>

</div>
</div>
<a id="a82095916400744938dcd6a4103925743" name="a82095916400744938dcd6a4103925743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82095916400744938dcd6a4103925743">&#9670;&#160;</a></span>MovingAverage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt; <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::MovingAverage </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>taps</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a K-tap FIR moving average filter of the form:<br  />
 y[n] = 1/k (x[k] + x[k-1] + … + x[0]) </p>
<p>This filter is always stable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taps</td><td>The number of samples to average over. Higher = smoother but slower </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt><em>Throws:</em></dt><dd>std::runtime_error if number of taps is less than 1. </dd></dl>

</div>
</div>
<a id="aac29bde247865221c91123b503efda74" name="aac29bde247865221c91123b503efda74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac29bde247865221c91123b503efda74">&#9670;&#160;</a></span>Reset() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::Reset </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the filter state. </p>

</div>
</div>
<a id="a96e6b7a38994d15c641e96249ae0183a" name="a96e6b7a38994d15c641e96249ae0183a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96e6b7a38994d15c641e96249ae0183a">&#9670;&#160;</a></span>Reset() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::Reset </td>
          <td>(</td>
          <td class="paramtype">std::span&lt; const T &gt;</td>          <td class="paramname"><span class="paramname"><em>inputBuffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::span&lt; const T &gt;</td>          <td class="paramname"><span class="paramname"><em>outputBuffer</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets the filter state, initializing internal buffers to the provided values. </p>
<p>These are the expected lengths of the buffers, depending on what type of linear filter used:</p>
<table class="doxtable">
<tr>
<th>Type </th><th>Input Buffer Size </th><th>Output Buffer Size  </th></tr>
<tr>
<td>Unspecified </td><td>size of <code class="JavaDocCode">ffGains</code> </td><td>size of <code class="JavaDocCode">fbGains</code>  </td></tr>
<tr>
<td>Single Pole IIR </td><td>1 </td><td>1  </td></tr>
<tr>
<td>High-Pass </td><td>2 </td><td>1  </td></tr>
<tr>
<td>Moving Average </td><td><code class="JavaDocCode">taps</code> </td><td>0  </td></tr>
<tr>
<td>Finite Difference </td><td>size of <code class="JavaDocCode">stencil</code> </td><td>0  </td></tr>
<tr>
<td>Backward Finite Difference </td><td><code class="JavaDocCode">Samples</code> </td><td>0  </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputBuffer</td><td>Values to initialize input buffer. </td></tr>
    <tr><td class="paramname">outputBuffer</td><td>Values to initialize output buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt><em>Throws:</em></dt><dd>std::runtime_error if size of inputBuffer or outputBuffer does not match the size of ffGains and fbGains provided in the constructor. </dd></dl>

</div>
</div>
<a id="add4387e213a0a8ea1dae1e2bf39e0b0b" name="add4387e213a0a8ea1dae1e2bf39e0b0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add4387e213a0a8ea1dae1e2bf39e0b0b">&#9670;&#160;</a></span>SinglePoleIIR()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr <a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a>&lt; T &gt; <a class="el" href="classfrc_1_1_linear_filter.html">frc::LinearFilter</a>&lt; T &gt;::SinglePoleIIR </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>timeConstant</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t</td>          <td class="paramname"><span class="paramname"><em>period</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a one-pole IIR low-pass filter of the form:<br  />
 y[n] = (1 - gain) x[n] + gain y[n-1]<br  />
 where gain = e<sup>-dt / T</sup>, T is the time constant in seconds. </p>
<p>Note: T = 1 / (2 pi f) where f is the cutoff frequency in Hz, the frequency above which the input starts to attenuate.</p>
<p>This filter is stable for time constants greater than zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeConstant</td><td>The discrete-time time constant in seconds. </td></tr>
    <tr><td class="paramname">period</td><td>The period in seconds between samples taken by the user. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>frc/filter/<a class="el" href="_linear_filter_8h_source.html">LinearFilter.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefrc.html">frc</a></li><li class="navelem"><a class="el" href="classfrc_1_1_linear_filter.html">LinearFilter</a></li>
    <li class="footer">Generated on Thu Oct 24 2024 04:48:54 for WPILibC++ by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
