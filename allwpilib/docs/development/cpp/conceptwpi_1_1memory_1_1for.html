<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WPILibC++: wpi::memory::for Concept Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="wpilib-128.png"/></td>
  <td id="projectalign">
   <div id="projectname">WPILibC++<span id="projectnumber">&#160;2023.0.0-alpha-2-13-gfbdc810</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('conceptwpi_1_1memory_1_1for.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">wpi::memory::for Concept Reference<div class="ingroups"><a class="el" href="group__adapter.html">Adapters and Wrappers</a> &#124; <a class="el" href="group__core.html">Core components</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Creates a <code>std::unique_ptr</code> using a the allocation.  
<a href="conceptwpi_1_1memory_1_1for.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="smart__ptr_8hpp_source.html">/home/runner/work/allwpilib/allwpilib/wpiutil/src/main/native/thirdparty/memory/include/wpi/memory/smart_ptr.hpp</a>&gt;</code></p>
<h2 class="groupheader">Concept definition</h2>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;&gt;</div>
<div class="line"><span class="keyword">concept </span><a class="code hl_concept" href="conceptwpi_1_1memory_1_1for.html">wpi::memory::for</a> = </div>
<div class="ttc" id="aconceptwpi_1_1memory_1_1for_html"><div class="ttname"><a href="conceptwpi_1_1memory_1_1for.html">wpi::memory::for</a></div><div class="ttdoc">Creates a std::unique_ptr using a the allocation.</div></div>
</div><!-- fragment --><a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Creates a <code>std::unique_ptr</code> using a the allocation. </p>
<p >which is_block_allocator or is_raw_allocator is <code>true</code> with a deeply_tracked_block_allocator.</p>
<p >allocating the blocks.</p>
<p >A memory arena that manages huge memory blocks for a higher-level allocator.</p>
<p >Creates a <code>std::shared_ptr</code> using a the allocation.</p>
<p >Creates a <code>std::unique_ptr</code> owning an array using a type-erased the allocation.</p>
<p >Creates a <code>std::unique_ptr</code> owning an array using a the allocation.</p>
<p >Creates a <code>std::unique_ptr</code> using a type-erased the allocation.</p>
<p >\effects Allocates memory for the given type using the allocator and creates a new object inside it passing the given arguments to its constructor. </p><dl class="section return"><dt>Returns</dt><dd>A <code>std::unique_ptr</code> owning that memory. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the allocator is stateful a reference to the <code>RawAllocator</code> will be stored inside the deleter, the caller has to ensure that the object lives as long as the smart pointer.</dd></dl>
<p>It is the same as the other overload but stores the reference to the allocator type-erased inside the <code>std::unique_ptr</code>. \effects Allocates memory for the given type using the allocator and creates a new object inside it passing the given arguments to its constructor. </p><dl class="section return"><dt>Returns</dt><dd>A <code>std::unique_ptr</code> with a type-erased allocator reference owning that memory. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the allocator is stateful a reference to the <code>RawAllocator</code> will be stored inside the deleter, the caller has to ensure that the object lives as long as the smart pointer.</dd></dl>
<p>\effects Allocates memory for an array of given size and value initializes each element inside of it. </p><dl class="section return"><dt>Returns</dt><dd>A <code>std::unique_ptr</code> owning that array. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the allocator is stateful a reference to the <code>RawAllocator</code> will be stored inside the deleter, the caller has to ensure that the object lives as long as the smart pointer.</dd></dl>
<p>It is the same as the other overload but stores the reference to the allocator type-erased inside the <code>std::unique_ptr</code>. \effects Allocates memory for an array of given size and value initializes each element inside of it. </p><dl class="section return"><dt>Returns</dt><dd>A <code>std::unique_ptr</code> with a type-erased allocator reference owning that array. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the allocator is stateful a reference to the <code>RawAllocator</code> will be stored inside the deleter, the caller has to ensure that the object lives as long as the smart pointer.</dd></dl>
<p>It is similar to <code>std::allocate_shared</code> but uses a <code>RawAllocator</code> (and thus also supports any <code>Allocator</code>). \effects Calls std_allocator::make_std_allocator to wrap the allocator and forwards to <code>std::allocate_shared</code>. </p><dl class="section return"><dt>Returns</dt><dd>A <code>std::shared_ptr</code> created using <code>std::allocate_shared</code>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the allocator is stateful a reference to the <code>RawAllocator</code> will be stored inside the shared pointer, the caller has to ensure that the object lives as long as the smart pointer.</dd></dl>
<p>Some allocators like memory_stack work on huge memory blocks, this class manages them fro those allocators. It uses a the allocation of those blocks. The memory blocks in use are put onto a stack like structure, deallocation will pop from the top, so it is only possible to deallocate the last allocated block of the arena. By default, blocks are not really deallocated but stored in a cache. This can be disabled with the second template parameter, passing it uncached_arena (or <code>false</code>) disables it, cached_arena (or <code>true</code>) enables it explicitly.</p>
<p >It calls the <code><a class="el" href="namespacewpi_1_1memory_1_1traits__detail.html#a11ba56c63dcf7c5763ae6d090efc699f">allocate_array()</a></code> function with a node of size <code>1</code> and maximum alignment on the used allocator for the block allocation. The size of the next memory block will grow by a given factor after each allocation, allowing an amortized constant allocation time in the higher level allocator. The factor can be given as rational in the template parameter, default is <code>2</code>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacewpi.html">wpi</a></li><li class="navelem"><a class="el" href="namespacewpi_1_1memory.html">memory</a></li><li class="navelem"><a class="el" href="conceptwpi_1_1memory_1_1for.html">for</a></li>
    <li class="footer">Generated on Sat Oct 15 2022 23:36:13 for WPILibC++ by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
