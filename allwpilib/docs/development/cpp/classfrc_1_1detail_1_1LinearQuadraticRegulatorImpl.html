<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WPILibC++: frc::detail::LinearQuadraticRegulatorImpl&lt; States, Inputs &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WPILibC++
   &#160;<span id="projectnumber">2021.2.1-10-gc517ec6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">frc::detail::LinearQuadraticRegulatorImpl&lt; States, Inputs &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains the controller coefficients and logic for a linear-quadratic regulator (LQR).  
 <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LinearQuadraticRegulator_8h_source.html">LinearQuadraticRegulator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for frc::detail::LinearQuadraticRegulatorImpl&lt; States, Inputs &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.png" usemap="#frc::detail::LinearQuadraticRegulatorImpl_3C_20States_2C_20Inputs_20_3E_map" alt=""/>
  <map id="frc::detail::LinearQuadraticRegulatorImpl_3C_20States_2C_20Inputs_20_3E_map" name="frc::detail::LinearQuadraticRegulatorImpl_3C_20States_2C_20Inputs_20_3E_map">
<area href="classfrc_1_1LinearQuadraticRegulator.html" alt="frc::LinearQuadraticRegulator&lt; States, Inputs &gt;" shape="rect" coords="0,56,338,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9e04bab9215fd029fb6e7a2f3dfc9942"><td class="memTemplParams" colspan="2">template&lt;int Outputs&gt; </td></tr>
<tr class="memitem:a9e04bab9215fd029fb6e7a2f3dfc9942"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a9e04bab9215fd029fb6e7a2f3dfc9942">LinearQuadraticRegulatorImpl</a> (const <a class="el" href="classfrc_1_1LinearSystem.html">LinearSystem</a>&lt; States, Inputs, Outputs &gt; &amp;plant, const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, States &gt; &amp;Qelems, const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, Inputs &gt; &amp;Relems, units::second_t dt)</td></tr>
<tr class="memdesc:a9e04bab9215fd029fb6e7a2f3dfc9942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a controller with the given coefficients and plant.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a9e04bab9215fd029fb6e7a2f3dfc9942">More...</a><br /></td></tr>
<tr class="separator:a9e04bab9215fd029fb6e7a2f3dfc9942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1df8c1f568e44b40289a7cff19c9c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a8d1df8c1f568e44b40289a7cff19c9c8">LinearQuadraticRegulatorImpl</a> (const Eigen::Matrix&lt; double, States, States &gt; &amp;A, const Eigen::Matrix&lt; double, States, Inputs &gt; &amp;B, const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, States &gt; &amp;Qelems, const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, Inputs &gt; &amp;Relems, units::second_t dt)</td></tr>
<tr class="memdesc:a8d1df8c1f568e44b40289a7cff19c9c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a controller with the given coefficients and plant.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a8d1df8c1f568e44b40289a7cff19c9c8">More...</a><br /></td></tr>
<tr class="separator:a8d1df8c1f568e44b40289a7cff19c9c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f0623a25a1e1720d0bc9537bc9cef63"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a1f0623a25a1e1720d0bc9537bc9cef63">LinearQuadraticRegulatorImpl</a> (const Eigen::Matrix&lt; double, States, States &gt; &amp;A, const Eigen::Matrix&lt; double, States, Inputs &gt; &amp;B, const Eigen::Matrix&lt; double, States, States &gt; &amp;Q, const Eigen::Matrix&lt; double, Inputs, Inputs &gt; &amp;<a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a5a27ca0298e1dae46f93164be9d319ed">R</a>, units::second_t dt)</td></tr>
<tr class="memdesc:a1f0623a25a1e1720d0bc9537bc9cef63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a controller with the given coefficients and plant.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a1f0623a25a1e1720d0bc9537bc9cef63">More...</a><br /></td></tr>
<tr class="separator:a1f0623a25a1e1720d0bc9537bc9cef63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7285f66a89d875a70d7dee89ebb878d"><td class="memItemLeft" align="right" valign="top"><a id="ae7285f66a89d875a70d7dee89ebb878d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LinearQuadraticRegulatorImpl</b> (<a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">LinearQuadraticRegulatorImpl</a> &amp;&amp;)=default</td></tr>
<tr class="separator:ae7285f66a89d875a70d7dee89ebb878d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d7a99447a6b01ce0997a2f8e9294f9e"><td class="memItemLeft" align="right" valign="top"><a id="a3d7a99447a6b01ce0997a2f8e9294f9e"></a>
<a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">LinearQuadraticRegulatorImpl</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">LinearQuadraticRegulatorImpl</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a3d7a99447a6b01ce0997a2f8e9294f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76c2f83b13c5f8555c36a1405e355698"><td class="memItemLeft" align="right" valign="top"><a id="a76c2f83b13c5f8555c36a1405e355698"></a>
const Eigen::Matrix&lt; double, Inputs, States &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a76c2f83b13c5f8555c36a1405e355698">K</a> () const</td></tr>
<tr class="memdesc:a76c2f83b13c5f8555c36a1405e355698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the controller matrix K. <br /></td></tr>
<tr class="separator:a76c2f83b13c5f8555c36a1405e355698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51fa24fab411efb64d11f9827e178770"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a51fa24fab411efb64d11f9827e178770">K</a> (int i, int j) const</td></tr>
<tr class="memdesc:a51fa24fab411efb64d11f9827e178770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an element of the controller matrix K.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a51fa24fab411efb64d11f9827e178770">More...</a><br /></td></tr>
<tr class="separator:a51fa24fab411efb64d11f9827e178770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a27ca0298e1dae46f93164be9d319ed"><td class="memItemLeft" align="right" valign="top">const Eigen::Matrix&lt; double, States, 1 &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a5a27ca0298e1dae46f93164be9d319ed">R</a> () const</td></tr>
<tr class="memdesc:a5a27ca0298e1dae46f93164be9d319ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the reference vector r.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a5a27ca0298e1dae46f93164be9d319ed">More...</a><br /></td></tr>
<tr class="separator:a5a27ca0298e1dae46f93164be9d319ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac098214a4f791996b8968f3da1aa65e0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#ac098214a4f791996b8968f3da1aa65e0">R</a> (int i) const</td></tr>
<tr class="memdesc:ac098214a4f791996b8968f3da1aa65e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an element of the reference vector r.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#ac098214a4f791996b8968f3da1aa65e0">More...</a><br /></td></tr>
<tr class="separator:ac098214a4f791996b8968f3da1aa65e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703932c665cb2e05aa02bdae2f5308e8"><td class="memItemLeft" align="right" valign="top">const Eigen::Matrix&lt; double, Inputs, 1 &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a703932c665cb2e05aa02bdae2f5308e8">U</a> () const</td></tr>
<tr class="memdesc:a703932c665cb2e05aa02bdae2f5308e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the control input vector u.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a703932c665cb2e05aa02bdae2f5308e8">More...</a><br /></td></tr>
<tr class="separator:a703932c665cb2e05aa02bdae2f5308e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd1ec7de03fdf803482bdedf1472b6fd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#acd1ec7de03fdf803482bdedf1472b6fd">U</a> (int i) const</td></tr>
<tr class="memdesc:acd1ec7de03fdf803482bdedf1472b6fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an element of the control input vector u.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#acd1ec7de03fdf803482bdedf1472b6fd">More...</a><br /></td></tr>
<tr class="separator:acd1ec7de03fdf803482bdedf1472b6fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac46cbf2ca057d758eda7f8bdaedd712e"><td class="memItemLeft" align="right" valign="top"><a id="ac46cbf2ca057d758eda7f8bdaedd712e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#ac46cbf2ca057d758eda7f8bdaedd712e">Reset</a> ()</td></tr>
<tr class="memdesc:ac46cbf2ca057d758eda7f8bdaedd712e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the controller. <br /></td></tr>
<tr class="separator:ac46cbf2ca057d758eda7f8bdaedd712e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74cb3afe2de72d0a1eac26e5790a6cf5"><td class="memItemLeft" align="right" valign="top">Eigen::Matrix&lt; double, Inputs, 1 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a74cb3afe2de72d0a1eac26e5790a6cf5">Calculate</a> (const Eigen::Matrix&lt; double, States, 1 &gt; &amp;x)</td></tr>
<tr class="memdesc:a74cb3afe2de72d0a1eac26e5790a6cf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next output of the controller.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#a74cb3afe2de72d0a1eac26e5790a6cf5">More...</a><br /></td></tr>
<tr class="separator:a74cb3afe2de72d0a1eac26e5790a6cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad374c3137e2df90f85ef031ad81c2ad2"><td class="memItemLeft" align="right" valign="top">Eigen::Matrix&lt; double, Inputs, 1 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#ad374c3137e2df90f85ef031ad81c2ad2">Calculate</a> (const Eigen::Matrix&lt; double, States, 1 &gt; &amp;x, const Eigen::Matrix&lt; double, States, 1 &gt; &amp;nextR)</td></tr>
<tr class="memdesc:ad374c3137e2df90f85ef031ad81c2ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next output of the controller.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#ad374c3137e2df90f85ef031ad81c2ad2">More...</a><br /></td></tr>
<tr class="separator:ad374c3137e2df90f85ef031ad81c2ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2dc9ca0e9e30311d447c8d66b4da8db"><td class="memTemplParams" colspan="2">template&lt;int Outputs&gt; </td></tr>
<tr class="memitem:af2dc9ca0e9e30311d447c8d66b4da8db"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#af2dc9ca0e9e30311d447c8d66b4da8db">LatencyCompensate</a> (const <a class="el" href="classfrc_1_1LinearSystem.html">LinearSystem</a>&lt; States, Inputs, Outputs &gt; &amp;plant, units::second_t dt, units::second_t inputDelay)</td></tr>
<tr class="memdesc:af2dc9ca0e9e30311d447c8d66b4da8db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjusts LQR controller gain to compensate for a pure time delay in the input.  <a href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html#af2dc9ca0e9e30311d447c8d66b4da8db">More...</a><br /></td></tr>
<tr class="separator:af2dc9ca0e9e30311d447c8d66b4da8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;int States, int Inputs&gt;<br />
class frc::detail::LinearQuadraticRegulatorImpl&lt; States, Inputs &gt;</h3>

<p>Contains the controller coefficients and logic for a linear-quadratic regulator (LQR). </p>
<p>LQRs use the control law u = K(r - x).</p>
<p>For more on the underlying math, read <a href="https://file.tavsys.net/control/controls-engineering-in-frc.pdf">https://file.tavsys.net/control/controls-engineering-in-frc.pdf</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9e04bab9215fd029fb6e7a2f3dfc9942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e04bab9215fd029fb6e7a2f3dfc9942">&#9670;&nbsp;</a></span>LinearQuadraticRegulatorImpl() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<div class="memtemplate">
template&lt;int Outputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::<a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">LinearQuadraticRegulatorImpl</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1LinearSystem.html">LinearSystem</a>&lt; States, Inputs, Outputs &gt; &amp;&#160;</td>
          <td class="paramname"><em>plant</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, States &gt; &amp;&#160;</td>
          <td class="paramname"><em>Qelems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, Inputs &gt; &amp;&#160;</td>
          <td class="paramname"><em>Relems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a controller with the given coefficients and plant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">plant</td><td>The plant being controlled. </td></tr>
    <tr><td class="paramname">Qelems</td><td>The maximum desired error tolerance for each state. </td></tr>
    <tr><td class="paramname">Relems</td><td>The maximum desired control effort for each input. </td></tr>
    <tr><td class="paramname">dt</td><td>Discretization timestep. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8d1df8c1f568e44b40289a7cff19c9c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d1df8c1f568e44b40289a7cff19c9c8">&#9670;&nbsp;</a></span>LinearQuadraticRegulatorImpl() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::<a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">LinearQuadraticRegulatorImpl</a> </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, States &gt; &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, Inputs &gt; &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, States &gt; &amp;&#160;</td>
          <td class="paramname"><em>Qelems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, Inputs &gt; &amp;&#160;</td>
          <td class="paramname"><em>Relems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a controller with the given coefficients and plant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>Continuous system matrix of the plant being controlled. </td></tr>
    <tr><td class="paramname">B</td><td>Continuous input matrix of the plant being controlled. </td></tr>
    <tr><td class="paramname">Qelems</td><td>The maximum desired error tolerance for each state. </td></tr>
    <tr><td class="paramname">Relems</td><td>The maximum desired control effort for each input. </td></tr>
    <tr><td class="paramname">dt</td><td>Discretization timestep. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1f0623a25a1e1720d0bc9537bc9cef63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f0623a25a1e1720d0bc9537bc9cef63">&#9670;&nbsp;</a></span>LinearQuadraticRegulatorImpl() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::<a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">LinearQuadraticRegulatorImpl</a> </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, States &gt; &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, Inputs &gt; &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, States &gt; &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Matrix&lt; double, Inputs, Inputs &gt; &amp;&#160;</td>
          <td class="paramname"><em>R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a controller with the given coefficients and plant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>Continuous system matrix of the plant being controlled. </td></tr>
    <tr><td class="paramname">B</td><td>Continuous input matrix of the plant being controlled. </td></tr>
    <tr><td class="paramname">Q</td><td>The state cost matrix. </td></tr>
    <tr><td class="paramname">R</td><td>The input cost matrix. </td></tr>
    <tr><td class="paramname">dt</td><td>Discretization timestep. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a74cb3afe2de72d0a1eac26e5790a6cf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74cb3afe2de72d0a1eac26e5790a6cf5">&#9670;&nbsp;</a></span>Calculate() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Matrix&lt;double, Inputs, 1&gt; <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::Calculate </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, 1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the next output of the controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The current state x. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad374c3137e2df90f85ef031ad81c2ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad374c3137e2df90f85ef031ad81c2ad2">&#9670;&nbsp;</a></span>Calculate() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Matrix&lt;double, Inputs, 1&gt; <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::Calculate </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, 1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Matrix&lt; double, States, 1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>nextR</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the next output of the controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The current state x. </td></tr>
    <tr><td class="paramname">nextR</td><td>The next reference vector r. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a51fa24fab411efb64d11f9827e178770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51fa24fab411efb64d11f9827e178770">&#9670;&nbsp;</a></span>K()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::K </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns an element of the controller matrix K. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Row of K. </td></tr>
    <tr><td class="paramname">j</td><td>Column of K. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af2dc9ca0e9e30311d447c8d66b4da8db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2dc9ca0e9e30311d447c8d66b4da8db">&#9670;&nbsp;</a></span>LatencyCompensate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<div class="memtemplate">
template&lt;int Outputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::LatencyCompensate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1LinearSystem.html">LinearSystem</a>&lt; States, Inputs, Outputs &gt; &amp;&#160;</td>
          <td class="paramname"><em>plant</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>inputDelay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adjusts LQR controller gain to compensate for a pure time delay in the input. </p>
<p>Linear-Quadratic regulator controller gains tend to be aggressive. If sensor measurements are time-delayed too long, the LQR may be unstable. However, if we know the amount of delay, we can compute the control based on where the system will be after the time delay.</p>
<p>See <a href="https://file.tavsys.net/control/controls-engineering-in-frc.pdf">https://file.tavsys.net/control/controls-engineering-in-frc.pdf</a> appendix C.4 for a derivation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">plant</td><td>The plant being controlled. </td></tr>
    <tr><td class="paramname">dt</td><td>Discretization timestep. </td></tr>
    <tr><td class="paramname">inputDelay</td><td>Input time delay. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5a27ca0298e1dae46f93164be9d319ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a27ca0298e1dae46f93164be9d319ed">&#9670;&nbsp;</a></span>R() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const Eigen::Matrix&lt;double, States, 1&gt;&amp; <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::R </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the reference vector r. </p>
<dl class="section return"><dt>Returns</dt><dd>The reference vector. </dd></dl>

</div>
</div>
<a id="ac098214a4f791996b8968f3da1aa65e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac098214a4f791996b8968f3da1aa65e0">&#9670;&nbsp;</a></span>R() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::R </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns an element of the reference vector r. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Row of r.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The row of the reference vector. </dd></dl>

</div>
</div>
<a id="a703932c665cb2e05aa02bdae2f5308e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a703932c665cb2e05aa02bdae2f5308e8">&#9670;&nbsp;</a></span>U() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const Eigen::Matrix&lt;double, Inputs, 1&gt;&amp; <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::U </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the control input vector u. </p>
<dl class="section return"><dt>Returns</dt><dd>The control input. </dd></dl>

</div>
</div>
<a id="acd1ec7de03fdf803482bdedf1472b6fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd1ec7de03fdf803482bdedf1472b6fd">&#9670;&nbsp;</a></span>U() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int States, int Inputs&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">frc::detail::LinearQuadraticRegulatorImpl</a>&lt; States, Inputs &gt;::U </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns an element of the control input vector u. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Row of u.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The row of the control input vector. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/allwpilib/allwpilib/wpimath/src/main/native/include/frc/controller/<a class="el" href="LinearQuadraticRegulator_8h_source.html">LinearQuadraticRegulator.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefrc.html">frc</a></li><li class="navelem"><b>detail</b></li><li class="navelem"><a class="el" href="classfrc_1_1detail_1_1LinearQuadraticRegulatorImpl.html">LinearQuadraticRegulatorImpl</a></li>
    <li class="footer">Generated on Sat Jan 23 2021 03:50:41 for WPILibC++ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
