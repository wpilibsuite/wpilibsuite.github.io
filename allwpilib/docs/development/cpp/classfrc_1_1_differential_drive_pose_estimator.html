<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WPILibC++: frc::DifferentialDrivePoseEstimator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="wpilib-128.png"/></td>
  <td id="projectalign">
   <div id="projectname">WPILibC++<span id="projectnumber">&#160;2023.1.1-beta-4-77-gbe27171</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classfrc_1_1_differential_drive_pose_estimator.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfrc_1_1_differential_drive_pose_estimator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">frc::DifferentialDrivePoseEstimator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class wraps Differential Drive Odometry to fuse latency-compensated vision measurements with differential drive encoder measurements.  
 <a href="classfrc_1_1_differential_drive_pose_estimator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_differential_drive_pose_estimator_8h_source.html">frc/estimator/DifferentialDrivePoseEstimator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af1b7919e05ac47c5d7c20a9d98801232"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#af1b7919e05ac47c5d7c20a9d98801232">DifferentialDrivePoseEstimator</a> (<a class="el" href="classfrc_1_1_differential_drive_kinematics.html">DifferentialDriveKinematics</a> &amp;kinematics, const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;gyroAngle, units::meter_t leftDistance, units::meter_t rightDistance, const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;initialPose)</td></tr>
<tr class="memdesc:af1b7919e05ac47c5d7c20a9d98801232"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html" title="This class wraps Differential Drive Odometry to fuse latency-compensated vision measurements with dif...">DifferentialDrivePoseEstimator</a> with default standard deviations for the model and vision measurements.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#af1b7919e05ac47c5d7c20a9d98801232">More...</a><br /></td></tr>
<tr class="separator:af1b7919e05ac47c5d7c20a9d98801232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac75ea75a8e8774859b0c912972988e0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#ac75ea75a8e8774859b0c912972988e0f">DifferentialDrivePoseEstimator</a> (<a class="el" href="classfrc_1_1_differential_drive_kinematics.html">DifferentialDriveKinematics</a> &amp;kinematics, const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;gyroAngle, units::meter_t leftDistance, units::meter_t rightDistance, const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;initialPose, const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;stateStdDevs, const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;visionMeasurementStdDevs)</td></tr>
<tr class="memdesc:ac75ea75a8e8774859b0c912972988e0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html" title="This class wraps Differential Drive Odometry to fuse latency-compensated vision measurements with dif...">DifferentialDrivePoseEstimator</a>.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#ac75ea75a8e8774859b0c912972988e0f">More...</a><br /></td></tr>
<tr class="separator:ac75ea75a8e8774859b0c912972988e0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16c47b88fa12c715da87d6bf516dcae3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a16c47b88fa12c715da87d6bf516dcae3">SetVisionMeasurementStdDevs</a> (const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;visionMeasurementStdDevs)</td></tr>
<tr class="memdesc:a16c47b88fa12c715da87d6bf516dcae3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the pose estimator's trust of global measurements.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#a16c47b88fa12c715da87d6bf516dcae3">More...</a><br /></td></tr>
<tr class="separator:a16c47b88fa12c715da87d6bf516dcae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a9ed11269b3ca884ed9f2ba0ffad7bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a9a9ed11269b3ca884ed9f2ba0ffad7bf">ResetPosition</a> (const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;gyroAngle, units::meter_t leftDistance, units::meter_t rightDistance, const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;pose)</td></tr>
<tr class="memdesc:a9a9ed11269b3ca884ed9f2ba0ffad7bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the robot's position on the field.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#a9a9ed11269b3ca884ed9f2ba0ffad7bf">More...</a><br /></td></tr>
<tr class="separator:a9a9ed11269b3ca884ed9f2ba0ffad7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21eaaa6bfa686a0910a999fd7a3624c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a21eaaa6bfa686a0910a999fd7a3624c2">GetEstimatedPosition</a> () const</td></tr>
<tr class="memdesc:a21eaaa6bfa686a0910a999fd7a3624c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the estimated robot pose.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#a21eaaa6bfa686a0910a999fd7a3624c2">More...</a><br /></td></tr>
<tr class="separator:a21eaaa6bfa686a0910a999fd7a3624c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f5072a0aa4e4fba8d7528427047720"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a08f5072a0aa4e4fba8d7528427047720">AddVisionMeasurement</a> (const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;visionRobotPose, units::second_t timestamp)</td></tr>
<tr class="memdesc:a08f5072a0aa4e4fba8d7528427047720"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a vision measurement to the Kalman Filter.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#a08f5072a0aa4e4fba8d7528427047720">More...</a><br /></td></tr>
<tr class="separator:a08f5072a0aa4e4fba8d7528427047720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad273aa27bda035fe8ca417a7ea2891c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#ad273aa27bda035fe8ca417a7ea2891c5">AddVisionMeasurement</a> (const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;visionRobotPose, units::second_t timestamp, const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;visionMeasurementStdDevs)</td></tr>
<tr class="memdesc:ad273aa27bda035fe8ca417a7ea2891c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a vision measurement to the Kalman Filter.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#ad273aa27bda035fe8ca417a7ea2891c5">More...</a><br /></td></tr>
<tr class="separator:ad273aa27bda035fe8ca417a7ea2891c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e56e9abaae7dc256d20dea333bcdbfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a2e56e9abaae7dc256d20dea333bcdbfb">Update</a> (const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;gyroAngle, units::meter_t leftDistance, units::meter_t rightDistance)</td></tr>
<tr class="memdesc:a2e56e9abaae7dc256d20dea333bcdbfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the Unscented Kalman Filter using only wheel encoder information.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#a2e56e9abaae7dc256d20dea333bcdbfb">More...</a><br /></td></tr>
<tr class="separator:a2e56e9abaae7dc256d20dea333bcdbfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d66817b1f4aec2b4ffa0faa6ee01c59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a0d66817b1f4aec2b4ffa0faa6ee01c59">UpdateWithTime</a> (units::second_t currentTime, const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;gyroAngle, units::meter_t leftDistance, units::meter_t rightDistance)</td></tr>
<tr class="memdesc:a0d66817b1f4aec2b4ffa0faa6ee01c59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the Unscented Kalman Filter using only wheel encoder information.  <a href="classfrc_1_1_differential_drive_pose_estimator.html#a0d66817b1f4aec2b4ffa0faa6ee01c59">More...</a><br /></td></tr>
<tr class="separator:a0d66817b1f4aec2b4ffa0faa6ee01c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class wraps Differential Drive Odometry to fuse latency-compensated vision measurements with differential drive encoder measurements. </p>
<p >It will correct for noisy vision measurements and encoder drift. It is intended to be an easy drop-in for <a class="el" href="classfrc_1_1_differential_drive_odometry.html" title="Class for differential drive odometry.">DifferentialDriveOdometry</a>. In fact, if you never call <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a08f5072a0aa4e4fba8d7528427047720" title="Adds a vision measurement to the Kalman Filter.">AddVisionMeasurement()</a>, and only call <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a2e56e9abaae7dc256d20dea333bcdbfb" title="Updates the Unscented Kalman Filter using only wheel encoder information.">Update()</a>, this will behave exactly the same as <a class="el" href="classfrc_1_1_differential_drive_odometry.html" title="Class for differential drive odometry.">DifferentialDriveOdometry</a>.</p>
<p ><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a2e56e9abaae7dc256d20dea333bcdbfb" title="Updates the Unscented Kalman Filter using only wheel encoder information.">Update()</a> should be called every robot loop (if your robot loops are faster or slower than the default of 20 ms, then you should change the nominal delta time via the constructor).</p>
<p ><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a08f5072a0aa4e4fba8d7528427047720" title="Adds a vision measurement to the Kalman Filter.">AddVisionMeasurement()</a> can be called as infrequently as you want; if you never call it, then this class will behave like regular encoder odometry.</p>
<p >The state-space system used internally has the following states (x) and outputs (y):</p>
<p ><b> x = [x, y, theta]ᵀ </b> in the field coordinate system containing x position, y position, and heading.</p>
<p ><b> y = [x, y, theta]ᵀ </b> from vision containing x position, y position, and heading. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af1b7919e05ac47c5d7c20a9d98801232" name="af1b7919e05ac47c5d7c20a9d98801232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b7919e05ac47c5d7c20a9d98801232">&#9670;&nbsp;</a></span>DifferentialDrivePoseEstimator() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">frc::DifferentialDrivePoseEstimator::DifferentialDrivePoseEstimator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfrc_1_1_differential_drive_kinematics.html">DifferentialDriveKinematics</a> &amp;&#160;</td>
          <td class="paramname"><em>kinematics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;&#160;</td>
          <td class="paramname"><em>gyroAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>leftDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>rightDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;&#160;</td>
          <td class="paramname"><em>initialPose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html" title="This class wraps Differential Drive Odometry to fuse latency-compensated vision measurements with dif...">DifferentialDrivePoseEstimator</a> with default standard deviations for the model and vision measurements. </p>
<p >The default standard deviations of the model states are 0.02 meters for x, 0.02 meters for y, and 0.01 radians for heading. The default standard deviations of the vision measurements are 0.1 meters for x, 0.1 meters for y, and 0.1 radians for heading.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kinematics</td><td>A correctly-configured kinematics object for your drivetrain. </td></tr>
    <tr><td class="paramname">gyroAngle</td><td>The gyro angle of the robot. </td></tr>
    <tr><td class="paramname">leftDistance</td><td>The distance traveled by the left encoder. </td></tr>
    <tr><td class="paramname">rightDistance</td><td>The distance traveled by the right encoder. </td></tr>
    <tr><td class="paramname">initialPose</td><td>The estimated initial pose. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac75ea75a8e8774859b0c912972988e0f" name="ac75ea75a8e8774859b0c912972988e0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac75ea75a8e8774859b0c912972988e0f">&#9670;&nbsp;</a></span>DifferentialDrivePoseEstimator() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">frc::DifferentialDrivePoseEstimator::DifferentialDrivePoseEstimator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfrc_1_1_differential_drive_kinematics.html">DifferentialDriveKinematics</a> &amp;&#160;</td>
          <td class="paramname"><em>kinematics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;&#160;</td>
          <td class="paramname"><em>gyroAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>leftDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>rightDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;&#160;</td>
          <td class="paramname"><em>initialPose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>stateStdDevs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>visionMeasurementStdDevs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html" title="This class wraps Differential Drive Odometry to fuse latency-compensated vision measurements with dif...">DifferentialDrivePoseEstimator</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kinematics</td><td>A correctly-configured kinematics object for your drivetrain. </td></tr>
    <tr><td class="paramname">gyroAngle</td><td>The gyro angle of the robot. </td></tr>
    <tr><td class="paramname">leftDistance</td><td>The distance traveled by the left encoder. </td></tr>
    <tr><td class="paramname">rightDistance</td><td>The distance traveled by the right encoder. </td></tr>
    <tr><td class="paramname">initialPose</td><td>The estimated initial pose. </td></tr>
    <tr><td class="paramname">stateStdDevs</td><td>Standard deviations of model states. Increase these numbers to trust your model's state estimates less. This matrix is in the form [x, y, theta]ᵀ, with units in meters and radians. </td></tr>
    <tr><td class="paramname">visionMeasurementStdDevs</td><td>Standard deviations of the vision measurements. Increase these numbers to trust global measurements from vision less. This matrix is in the form [x, y, theta]ᵀ, with units in meters and radians. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a08f5072a0aa4e4fba8d7528427047720" name="a08f5072a0aa4e4fba8d7528427047720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08f5072a0aa4e4fba8d7528427047720">&#9670;&nbsp;</a></span>AddVisionMeasurement() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void frc::DifferentialDrivePoseEstimator::AddVisionMeasurement </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;&#160;</td>
          <td class="paramname"><em>visionRobotPose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a vision measurement to the Kalman Filter. </p>
<p >This will correct the odometry pose estimate while still accounting for measurement noise.</p>
<p >This method can be called as infrequently as you want, as long as you are calling <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a2e56e9abaae7dc256d20dea333bcdbfb" title="Updates the Unscented Kalman Filter using only wheel encoder information.">Update()</a> every loop.</p>
<p >To promote stability of the pose estimate and make it robust to bad vision data, we recommend only adding vision measurements that are already within one meter or so of the current pose estimate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">visionRobotPose</td><td>The pose of the robot as measured by the vision camera. </td></tr>
    <tr><td class="paramname">timestamp</td><td>The timestamp of the vision measurement in seconds. Note that if you don't use your own time source by calling <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a0d66817b1f4aec2b4ffa0faa6ee01c59" title="Updates the Unscented Kalman Filter using only wheel encoder information.">UpdateWithTime()</a>, then you must use a timestamp with an epoch since FPGA startup (i.e. the epoch of this timestamp is the same epoch as <a class="el" href="classfrc_1_1_timer.html#a1a0b1c162a033bbf4d7053eee550745c" title="Return the FPGA system clock time in seconds.">frc::Timer::GetFPGATimestamp()</a>. This means that you should use <a class="el" href="classfrc_1_1_timer.html#a1a0b1c162a033bbf4d7053eee550745c" title="Return the FPGA system clock time in seconds.">frc::Timer::GetFPGATimestamp()</a> as your time source in this case. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad273aa27bda035fe8ca417a7ea2891c5" name="ad273aa27bda035fe8ca417a7ea2891c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad273aa27bda035fe8ca417a7ea2891c5">&#9670;&nbsp;</a></span>AddVisionMeasurement() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void frc::DifferentialDrivePoseEstimator::AddVisionMeasurement </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;&#160;</td>
          <td class="paramname"><em>visionRobotPose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>visionMeasurementStdDevs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a vision measurement to the Kalman Filter. </p>
<p >This will correct the odometry pose estimate while still accounting for measurement noise.</p>
<p >This method can be called as infrequently as you want, as long as you are calling <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a2e56e9abaae7dc256d20dea333bcdbfb" title="Updates the Unscented Kalman Filter using only wheel encoder information.">Update()</a> every loop.</p>
<p >To promote stability of the pose estimate and make it robust to bad vision data, we recommend only adding vision measurements that are already within one meter or so of the current pose estimate.</p>
<p >Note that the vision measurement standard deviations passed into this method will continue to apply to future measurements until a subsequent call to <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a16c47b88fa12c715da87d6bf516dcae3" title="Sets the pose estimator&#39;s trust of global measurements.">SetVisionMeasurementStdDevs()</a> or this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">visionRobotPose</td><td>The pose of the robot as measured by the vision camera. </td></tr>
    <tr><td class="paramname">timestamp</td><td>The timestamp of the vision measurement in seconds. Note that if you don't use your own time source by calling <a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html#a0d66817b1f4aec2b4ffa0faa6ee01c59" title="Updates the Unscented Kalman Filter using only wheel encoder information.">UpdateWithTime()</a>, then you must use a timestamp with an epoch since FPGA startup (i.e. the epoch of this timestamp is the same epoch as <a class="el" href="classfrc_1_1_timer.html#a1a0b1c162a033bbf4d7053eee550745c" title="Return the FPGA system clock time in seconds.">frc::Timer::GetFPGATimestamp()</a>. This means that you should use <a class="el" href="classfrc_1_1_timer.html#a1a0b1c162a033bbf4d7053eee550745c" title="Return the FPGA system clock time in seconds.">frc::Timer::GetFPGATimestamp()</a> as your time source in this case. </td></tr>
    <tr><td class="paramname">visionMeasurementStdDevs</td><td>Standard deviations of the vision measurements. Increase these numbers to trust global measurements from vision less. This matrix is in the form [x, y, theta]ᵀ, with units in meters and radians. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21eaaa6bfa686a0910a999fd7a3624c2" name="a21eaaa6bfa686a0910a999fd7a3624c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21eaaa6bfa686a0910a999fd7a3624c2">&#9670;&nbsp;</a></span>GetEstimatedPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> frc::DifferentialDrivePoseEstimator::GetEstimatedPosition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the estimated robot pose. </p>
<dl class="section return"><dt>Returns</dt><dd>The estimated robot pose. </dd></dl>

</div>
</div>
<a id="a9a9ed11269b3ca884ed9f2ba0ffad7bf" name="a9a9ed11269b3ca884ed9f2ba0ffad7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a9ed11269b3ca884ed9f2ba0ffad7bf">&#9670;&nbsp;</a></span>ResetPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void frc::DifferentialDrivePoseEstimator::ResetPosition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;&#160;</td>
          <td class="paramname"><em>gyroAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>leftDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>rightDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> &amp;&#160;</td>
          <td class="paramname"><em>pose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the robot's position on the field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gyroAngle</td><td>The current gyro angle. </td></tr>
    <tr><td class="paramname">leftDistance</td><td>The distance traveled by the left encoder. </td></tr>
    <tr><td class="paramname">rightDistance</td><td>The distance traveled by the right encoder. </td></tr>
    <tr><td class="paramname">pose</td><td>The estimated pose of the robot on the field. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16c47b88fa12c715da87d6bf516dcae3" name="a16c47b88fa12c715da87d6bf516dcae3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16c47b88fa12c715da87d6bf516dcae3">&#9670;&nbsp;</a></span>SetVisionMeasurementStdDevs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void frc::DifferentialDrivePoseEstimator::SetVisionMeasurementStdDevs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwpi_1_1array.html">wpi::array</a>&lt; double, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>visionMeasurementStdDevs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the pose estimator's trust of global measurements. </p>
<p >This might be used to change trust in vision measurements after the autonomous period, or to change trust as distance to a vision target increases.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">visionMeasurementStdDevs</td><td>Standard deviations of the vision measurements. Increase these numbers to trust global measurements from vision less. This matrix is in the form [x, y, theta]ᵀ, with units in meters and radians. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e56e9abaae7dc256d20dea333bcdbfb" name="a2e56e9abaae7dc256d20dea333bcdbfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e56e9abaae7dc256d20dea333bcdbfb">&#9670;&nbsp;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> frc::DifferentialDrivePoseEstimator::Update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;&#160;</td>
          <td class="paramname"><em>gyroAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>leftDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>rightDistance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the Unscented Kalman Filter using only wheel encoder information. </p>
<p >Note that this should be called every loop iteration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gyroAngle</td><td>The current gyro angle. </td></tr>
    <tr><td class="paramname">leftDistance</td><td>The distance traveled by the left encoder. </td></tr>
    <tr><td class="paramname">rightDistance</td><td>The distance traveled by the right encoder.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The estimated pose of the robot. </dd></dl>

</div>
</div>
<a id="a0d66817b1f4aec2b4ffa0faa6ee01c59" name="a0d66817b1f4aec2b4ffa0faa6ee01c59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d66817b1f4aec2b4ffa0faa6ee01c59">&#9670;&nbsp;</a></span>UpdateWithTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfrc_1_1_pose2d.html">Pose2d</a> frc::DifferentialDrivePoseEstimator::UpdateWithTime </td>
          <td>(</td>
          <td class="paramtype">units::second_t&#160;</td>
          <td class="paramname"><em>currentTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfrc_1_1_rotation2d.html">Rotation2d</a> &amp;&#160;</td>
          <td class="paramname"><em>gyroAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>leftDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">units::meter_t&#160;</td>
          <td class="paramname"><em>rightDistance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the Unscented Kalman Filter using only wheel encoder information. </p>
<p >Note that this should be called every loop iteration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentTime</td><td>The time at which this method was called. </td></tr>
    <tr><td class="paramname">gyroAngle</td><td>The current gyro angle. </td></tr>
    <tr><td class="paramname">leftDistance</td><td>The distance traveled by the left encoder. </td></tr>
    <tr><td class="paramname">rightDistance</td><td>The distance traveled by the right encoder.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The estimated pose of the robot. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>frc/estimator/<a class="el" href="_differential_drive_pose_estimator_8h_source.html">DifferentialDrivePoseEstimator.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefrc.html">frc</a></li><li class="navelem"><a class="el" href="classfrc_1_1_differential_drive_pose_estimator.html">DifferentialDrivePoseEstimator</a></li>
    <li class="footer">Generated on Wed Dec 7 2022 05:16:58 for WPILibC++ by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
